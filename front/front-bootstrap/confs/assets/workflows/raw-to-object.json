{
	"nodes": {
		"start": {
			"type": "StartNode",
			"params": {
				"consts": {
					"domain": null,
					"template": {
						"name": "Название",
						"legal_found": "true - если найдено название компании, false - если не извесна форма огранизации",
						"company": {
							"name": "Полное название комании",
							"inn": "ИНН",
							"ogrn": "ОГРН",
							"registration_date": "ГГГГ-ММ-ДД",
							"ceo_fio": "Фамилия Имя Отчество руководителя",
							"ceo_io": "Имя и Отчество руководителя без фамилии"
						},
						"contact": {
							"phone": "Телефон",
							"email": "Email",
							"website": "Сайт",
							"legal_address": "Юридический адрес",
							"address": "Фактический адрес"
						},
						"services": ["Услуга 1", "Услуга 2"],
						"equipment": ["Оборудование 1", "Оборудование 2"],
						"revenue": 0,
						"staff_average_number": 0
					}
				}
			}
		},
		"get_raw": {
			"type": "SQLQueryNode",
			"params": {
				"query": "select step, data from scrap_step where domain= :$.context.start.domain",
				"provider": "salesProvider"
			}
		},
		"ai_object_type_selector": {
			"type": "AiRequest",
			"params": {
				"config": {
					"system": "Ты помощник, который анализирует описание компании и возвращает её тип строго в виде строки в нижнем регистре.",
					"user": "Контекст: {{data}} Выбери один из типов: 3dprinting, cns, agregator, seller, other, both. Ответ строго одной строкой, только тип, без пояснений. Если компания имеет и 3D-принтеры, и ЧПУ-станки — выбери \"both\". Если производит продукцию под собственным брендом — \"other\". Если агрегирует заказы — \"agregator\". Если продаёт оборудование, но не обрабатывает заказы — \"seller\"."
				},
				"provider": "openaiProvider",
				"wrapName": "object",
				"jsonMode": false
			}
		},
		"ai_normalize": {
			"type": "AiRequest",
			"params": {
				"config": {
					"system": "Ты помощник который нормализует данные в формате json к стандартному виду",
					"user": "Контекст: {{data}} Преобразуй в формат шаблона внеси данные в нужные поля {{template}}. Ответь строго в формате JSON. Не добавляй пояснений, комментариев или текста вне JSON."
				},
				"provider": "openaiProvider",
				"wrapName": "object",
				"jsonMode": true
			}
		},
		"print": {
			"type": "PrintNode"
		}
	},
	"connections": {
		"start": ["get_raw"],
		"get_raw": ["ai_object_type_selector"],
		"ai_object_type_selector": ["ai_normalize"],
		"ai_normalize": ["print"]
	}
}
