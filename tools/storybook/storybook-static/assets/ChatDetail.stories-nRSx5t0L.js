var Zi=Object.defineProperty;var ea=(e,n,t)=>n in e?Zi(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var zn=(e,n,t)=>ea(e,typeof n!="symbol"?n+"":n,t);import{u as S}from"./jsxRuntime-BreS2Ahj.js";import{s as Vr,a as na,M as G,S as tn,l as de,d as ta,u as ra,$ as ia}from"./lucide-preact-CyBEQqbl.js";import{c as $r,a as De,B as Me,P as aa,C as sa,b as oa,S as la,d as ua,e as ca,f as pa,r as Mn,$ as fa,g as ha}from"./command-WPKR8Qp8.js";import{k as da,d as ma,A as Mt,q as rt,y as ga}from"./iframe-BIqZQAoS.js";import"./compat-CeQs_Ny8.js";import{g as qr}from"./_commonjsHelpers-D6-XlEtG.js";import"./preload-helper-Dp1pzeXC.js";import"./compat.module-Cr6-0uw_.js";class ya{constructor(){this.handlers=new Map,this.autoDetectHandlers=[]}register(n,t){this.handlers.set(n,t),t.detect&&this.autoDetectHandlers.push({detect:t.detect,deserialize:t.deserialize})}getHandler(n){return this.handlers.get(n)}autoDetectAndDeserialize(n){for(const t of this.autoDetectHandlers)if(t.detect(n))return t.deserialize(n);return n}}const Te=new ya;Te.register("Date",{serialize:e=>{if(e instanceof Date)return e.toISOString();const n=new Date(e);return isNaN(n.getTime())?e:n.toISOString()},deserialize:e=>new Date(e),detect:e=>{if(typeof e!="string"||!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/.test(e))return!1;const t=new Date(e);return!isNaN(t.getTime())}});Te.register("Uint8Array",{serialize:e=>{if(e instanceof Uint8Array){let n="";for(let t=0;t<e.byteLength;t++)n+=String.fromCharCode(e[t]);return{__type:"Uint8Array",data:btoa(n)}}return e},deserialize:e=>{if(typeof e=="object"&&e.__type==="Uint8Array"&&typeof e.data=="string"){const n=atob(e.data),t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}if(typeof e=="string")try{const n=atob(e),t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}catch{return e}return e},detect:e=>typeof e=="object"&&e!==null&&e.__type==="Uint8Array"});function it(e,n){if(e==null)return e;if(Array.isArray(e))return e.map(r=>it(r,n));if(n){const r=Te.getHandler(n);if(r&&e.constructor.name===n)return r.serialize(e)}const t=Te.getHandler(e.constructor.name);if(t)return t.serialize(e);if(typeof e=="object"){const r={};for(const i in e)e.hasOwnProperty(i)&&(r[i]=it(e[i]));return r}return e}function Cn(e,n){if(e==null)return e;if(Array.isArray(e))return e.map(t=>Cn(t,n));if(n){const t=Te.getHandler(n);if(t)return t.deserialize(e)}if(typeof e=="object"){const t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r],a=Te.autoDetectAndDeserialize(i);t[r]=a!==i?a:Cn(i)}return t}return Te.autoDetectAndDeserialize(e)}var On={};function _n(e,n={}){const t=new xa(e,n);return ka(t,e)}class xa{constructor(n,t){this.metadata=n;const r=typeof process<"u"?On==null?void 0:On.SERVICES_BASE:void 0;this.baseUrl=t.baseUrl||r||"/services",this.timeout=t.timeout||5e3,this.headers=t.headers||{}}call(n,t){const r=this.metadata.methods.find(i=>i.name===n);if(!r)throw new Error(`Method ${n} not found in service ${this.metadata.serviceName}`);return r.isAsyncIterable?this.callStreaming(n,t):this.callRegular(n,t)}async callRegular(n,t){const r=this.metadata.methods.find(u=>u.name===n),i=`/${this.metadata.serviceName}/${n}`,a=this.prepareParams(r.parameters,t),s=new AbortController,o=setTimeout(()=>{s.abort()},this.timeout);try{const u=`${this.baseUrl}${i}`,l=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",...this.headers},body:JSON.stringify(a),signal:s.signal});if(clearTimeout(o),!l.ok){let p=`HTTP ${u} ${l.status}: ${l.statusText}`;try{const h=await l.json();h.error&&(p=h.error)}catch{}throw new Error(p)}if(r.returnType==="void")return;const c=l.headers.get("content-type");if(c!=null&&c.includes("application/json")){const p=await l.json();return Cn(p,r.returnType)}else return l.text()}catch(u){throw clearTimeout(o),u.name==="AbortError"?new Error(`Request timeout after ${this.timeout}ms`):u}}callStreaming(n,t){const r=this.metadata.methods.find(o=>o.name===n),i=`/${this.metadata.serviceName}/${n}/stream`,a=this.prepareParams(r.parameters,t),s=this;return{async*[Symbol.asyncIterator](){const o=new AbortController,u=await fetch(`${s.baseUrl}${i}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream",...s.headers},body:JSON.stringify(a),signal:o.signal});if(!u.ok){let p=`HTTP ${u.status}: ${u.statusText}`;try{const h=await u.json();h.error&&(p=h.error)}catch{}throw new Error(p)}if(!u.body)throw new Error("Response body is null");const l=u.body.getReader(),c=new TextDecoder;try{let p="";for(;;){const{done:h,value:f}=await l.read();if(h)break;p+=c.decode(f,{stream:!0});let w=0,b=p.indexOf(`

`);for(;b!==-1;){const x=p.slice(w,b).split(`
`);for(const L of x){const E=L.trim();if(E&&E.startsWith("data: ")){const z=E.slice(6);if(z==="[DONE]")return;try{const F=JSON.parse(z);yield Cn(F,r.returnType)}catch(F){console.error("Error parsing JSON data:",z,F)}}}w=b+2,b=p.indexOf(`

`,w)}p=p.slice(w)}}finally{l.releaseLock()}}}}prepareParams(n,t){const r={};return n.forEach((i,a)=>{if(t[a]!==void 0)r[i.name]=it(t[a],i.type);else if(!i.optional)throw new Error(`Required parameter '${i.name}' is missing`)}),r}}function ka(e,n){const t={};return n.methods.forEach(r=>{t[r.name]=(...i)=>{const a=r.parameters.filter(o=>!o.optional).length,s=r.parameters.length;if(i.length<a)throw new Error(`Method ${r.name} requires at least ${a} arguments, got ${i.length}`);if(i.length>s)throw new Error(`Method ${r.name} accepts at most ${s} arguments, got ${i.length}`);return e.call(r.name,i)}}),t._metadata=n,t}new TextEncoder().encode("your-secret-key");const wa={interfaceName:"AiChatService",serviceName:"aichat",filePath:"../types/chats.ts",methods:[{name:"createSession",parameters:[{name:"serviceType",type:"ServiceType",optional:!1,isArray:!1},{name:"model",type:"string",optional:!0,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"sendMessage",parameters:[{name:"sessionId",type:"string",optional:!1,isArray:!1},{name:"messages",type:"ContentBlock",optional:!1,isArray:!0},{name:"options",type:"ConversationOptions",optional:!0,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!0},{name:"listOfChats",parameters:[{name:"params",type:"PaginationParams",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"deleteChat",parameters:[{name:"chatId",type:"string",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"getChat",parameters:[{name:"chatId",type:"string",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"saveContext",parameters:[{name:"chatId",type:"string",optional:!1,isArray:!1},{name:"context",type:"any",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"getContext",parameters:[{name:"chatId",type:"string",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"listContexts",parameters:[{name:"params",type:"PaginationParams",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1}],types:[{name:"ContentBlock",definition:`{
    type: ContentType;
    data?: any;
}`},{name:"ToolParameter",definition:"",properties:[{name:"type",type:"any",optional:!1,isArray:!1},{name:"description",type:"string",optional:!1,isArray:!1},{name:"required",type:"boolean",optional:!0,isArray:!1},{name:"enum",type:"any",optional:!0,isArray:!0},{name:"items",type:"ToolParameter",optional:!0,isArray:!1},{name:"properties",type:"Record",optional:!0,isArray:!1}]},{name:"Tool",definition:"",properties:[{name:"name",type:"string",optional:!1,isArray:!1},{name:"description",type:"string",optional:!1,isArray:!1},{name:"parameters",type:"any",optional:!1,isArray:!1},{name:"execute",type:"any",optional:!1,isArray:!1}]},{name:"ToolCall",definition:"",properties:[{name:"id",type:"string",optional:!1,isArray:!1},{name:"name",type:"string",optional:!1,isArray:!1},{name:"args",type:"Record",optional:!1,isArray:!1}]},{name:"ToolResult",definition:"",properties:[{name:"toolCallId",type:"string",optional:!1,isArray:!1},{name:"result",type:"any",optional:!1,isArray:!1},{name:"error",type:"string",optional:!0,isArray:!1}]},{name:"ConversationOptions",definition:`{
    stream?: boolean;
    tools?: Tool[];
    temperature?: number;
    maxTokens?: number;
}`},{name:"StreamEvent",definition:`{
    tokens?: number;
} & (
    | { type: StreamEventType.TEXT_DELTA; content: string }
    | { type: StreamEventType.TOOL_CALL; id: string; name: string; args: any }
    | { type: StreamEventType.COMPLETED; finishReason?: string }
    | { type: StreamEventType.ERROR; message: string }
)`},{name:"PaginationParams",definition:"",properties:[{name:"offset",type:"number",optional:!1,isArray:!1},{name:"limit",type:"number",optional:!1,isArray:!1}]},{name:"PaginatedResult",definition:"",properties:[{name:"items",type:"T",optional:!1,isArray:!0},{name:"totalCount",type:"number",optional:!0,isArray:!1}]},{name:"Chat",definition:"",properties:[{name:"id",type:"string",optional:!1,isArray:!1},{name:"name",type:"string",optional:!1,isArray:!1},{name:"description",type:"string",optional:!1,isArray:!1}]},{name:"ChatContextSummary",definition:"",properties:[{name:"id",type:"string",optional:!1,isArray:!1},{name:"chatId",type:"string",optional:!1,isArray:!1},{name:"updatedAt",type:"number",optional:!1,isArray:!1},{name:"size",type:"number",optional:!0,isArray:!1}]},{name:"ChatContext",definition:"",properties:[{name:"data",type:"any",optional:!1,isArray:!1}]}]};function ba(e){return _n(wa,e)}const Ca=ba(),Sa={interfaceName:"ThreadsService",serviceName:"threads",filePath:"../types/threads.ts",methods:[{name:"saveMessage",parameters:[{name:"message",type:"Message",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"readMessage",parameters:[{name:"threadId",type:"ULID",optional:!1,isArray:!1},{name:"messageId",type:"ULID",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"readMessageVersions",parameters:[{name:"threadId",type:"ULID",optional:!1,isArray:!1},{name:"messageId",type:"ULID",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"readThreadAllVersions",parameters:[{name:"threadId",type:"ULID",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"readThread",parameters:[{name:"threadId",type:"ULID",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1}],types:[{name:"ULID",definition:"string"},{name:"Message",definition:`{
  threadId: ULID;
  id?: ULID;
  timestamp?: number;
  beforeId?: ULID;
  user: string;
  type: MessageType;
  data: string;
}`}]};function Ia(e){return _n(Sa,e)}const Xr=Ia(),Ea={interfaceName:"StoreService",serviceName:"store",filePath:"../types/store.ts",methods:[{name:"save",parameters:[{name:"data",type:"Uint8Array",optional:!1,isArray:!1},{name:"originalSize",type:"number",optional:!0,isArray:!1},{name:"compression",type:"CompressionType",optional:!0,isArray:!1},{name:"owner",type:"string",optional:!0,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"saveWithHash",parameters:[{name:"hash",type:"HashString",optional:!1,isArray:!1},{name:"data",type:"Uint8Array",optional:!1,isArray:!1},{name:"originalSize",type:"number",optional:!0,isArray:!1},{name:"compression",type:"CompressionType",optional:!0,isArray:!1},{name:"owner",type:"string",optional:!0,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"delete",parameters:[{name:"hash",type:"HashString",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"get",parameters:[{name:"hash",type:"HashString",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"getWithMeta",parameters:[{name:"hash",type:"HashString",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"exists",parameters:[{name:"hash",type:"HashString",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"list",parameters:[{name:"params",type:"PaginationParams",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"storeStatistic",parameters:[],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1}],types:[{name:"HashString",definition:"string"},{name:"CompressionType",definition:'"none" | "deflate" | "gzip" | "brotli"'},{name:"PaginationParams",definition:"",properties:[{name:"key",type:"string",optional:!1,isArray:!1},{name:"offset",type:"number",optional:!1,isArray:!1},{name:"limit",type:"number",optional:!1,isArray:!1}]},{name:"PaginatedResult",definition:"",properties:[{name:"items",type:"T",optional:!1,isArray:!0},{name:"totalCount",type:"number",optional:!0,isArray:!1}]},{name:"BlockMetadata",definition:"",properties:[{name:"hash",type:"HashString",optional:!1,isArray:!1},{name:"size",type:"number",optional:!1,isArray:!1},{name:"originalSize",type:"number",optional:!1,isArray:!1},{name:"compression",type:"CompressionType",optional:!1,isArray:!1},{name:"owner",type:"string",optional:!1,isArray:!1}]}]};function Wr(e){return _n(Ea,e)}Wr();const Aa={interfaceName:"FilesService",serviceName:"files",filePath:"../types/files.ts",methods:[{name:"save",parameters:[{name:"file",type:"FileMetadata",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"saveChunk",parameters:[{name:"chunk",type:"FileChunk",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"update",parameters:[{name:"id",type:"UUID",optional:!1,isArray:!1},{name:"file",type:"FileMetadata",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"delete",parameters:[{name:"id",type:"UUID",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"get",parameters:[{name:"id",type:"UUID",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"getChunks",parameters:[{name:"id",type:"UUID",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"list",parameters:[{name:"params",type:"PaginationParams",optional:!1,isArray:!1}],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1},{name:"statistic",parameters:[],returnType:"any",isAsync:!0,returnTypeIsArray:!1,isAsyncIterable:!1}],types:[{name:"HashString",definition:"string"},{name:"UUID",definition:"string"},{name:"ISODateString",definition:"string"},{name:"PaginationParams",definition:`{
    key: string;
    offset: number;
    limit: number;
}`},{name:"PaginatedResult",definition:`{
    items: T[];
    totalCount?: number;
}`},{name:"FileStatus",definition:"'uploading' | 'uploaded' | 'failed'"},{name:"FileMetadata",definition:`{
    id:UUID
    hash: HashString; 
    status: FileStatus;
    name: string;
    fileSize: number;
    fileType: string;
    compression: string;
    owner: string;
    createdAt: ISODateString; 
    chunksCount: number;
}`},{name:"FileChunk",definition:`{
    fileId:UUID
    hash: HashString;
    chunkNumber: number;
    chunkSize: number;
    createdAt: ISODateString; 
}`},{name:"FileStatistic",definition:`{
    totalFiles: number;
    totalChunks: number;
    totalSize: number;
    createdAt: ISODateString;
}`}]};function Gr(e){return _n(Aa,e)}Gr();const Fn=async(e,n)=>{const t=await fetch(`/services/aichat/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const r=await t.text();throw new Error(r||`Request failed: ${t.status}`)}if(t.status!==204)return t.json()},rn={...Ca,listContexts:e=>Fn("listContexts",{params:e}),getContext:e=>Fn("getContext",{chatId:e}),saveContext:(e,n)=>Fn("saveContext",{chatId:e,context:n})},Ta=Wr({baseUrl:"/services"}),Da=Gr({baseUrl:"/services"});Vr.setStoreService(Ta);Vr.setFilesService(Da);const _a=new URL(""+new URL("store.worker-BYxN3Fax.js",import.meta.url).href,import.meta.url),La=new Worker(_a,{type:"module"});na(La,{baseUrl:"/services/store"});const we=class we{constructor(){zn(this,"locales",{});if(we.instance)return we.instance;we.instance=this}static getInstance(){return we.instance||new we,we.instance}setLocales(n,t){this.locales[n]=t}getLocales(n){return this.locales[n]}};zn(we,"instance",null);let at=we;const Yr=(e,n)=>{const t=e.createEffect({name:"LOAD_DATA_INFINITE",handler:async u=>{console.log("loadDataFx params:",u);const{offset:l=0,limit:c=20,sortBy:p,sortDirection:h,append:f=!1,...w}=u||{};try{const b=await n({limit:c,offset:l,...p&&{sortBy:p,sortDirection:h},...w});return console.log("loadDataFx result:",b),{items:(b==null?void 0:b.items)||[],totalCount:(b==null?void 0:b.totalCount)||0,append:f}}catch(b){throw console.error("loadDataFx error:",b),b}}}),r=e.createEvent("LOAD_MORE_EVENT"),i=e.createEvent("SET_SORT_INFINITE_EVENT"),a=e.createEvent("RESET_INFINITE_EVENT"),s=e.createEvent("SET_FILTERS_EVENT"),o=e.createStore({items:[],totalCount:0,loading:!1,loadingMore:!1,error:null,offset:0,limit:20,hasMore:!0,sortConfig:{key:null,direction:"asc"},filters:{},isInitialized:!1}).on(i,(u,l)=>({...u,sortConfig:l,items:[],offset:0,hasMore:!0})).on(s,(u,l)=>({...u,filters:l,items:[],offset:0,hasMore:!0,isInitialized:!1})).on(t.pending,(u,l)=>u.items.length===0&&l?{...u,loading:!0,loadingMore:!1}:l?{...u,loading:!1,loadingMore:!0}:{...u,loading:!1,loadingMore:!1}).on(t.doneData,(u,{items:l,totalCount:c,append:p})=>{console.log("Store updated with:",{append:p,receivedItems:l.length,currentItems:u.items.length,totalCount:c});const h=p?[...u.items,...l]:l,f=h.length,w=h.length<c;return console.log("New state:",{itemsCount:h.length,offset:f,hasMore:w,totalCount:c}),{...u,items:h,totalCount:c||0,offset:f,hasMore:w,loading:!1,loadingMore:!1,error:null,isInitialized:!0}}).on(t.failData,(u,l)=>(console.error("Store error:",l),{...u,error:l.message,loading:!1,loadingMore:!1})).on(a,()=>({items:[],totalCount:0,loading:!1,loadingMore:!1,error:null,offset:0,limit:20,hasMore:!0,sortConfig:{key:null,direction:"asc"},filters:{},isInitialized:!1}));return G({clock:r,source:o,filter:u=>{const l=!u.loading&&!u.loadingMore&&u.hasMore;return console.log("loadMore filter:",{shouldLoad:l,loading:u.loading,loadingMore:u.loadingMore,hasMore:u.hasMore}),l},fn:(u,l={})=>{const c=u.items.length>0,p=u.items.length;return console.log("loadMore fn:",{offset:p,itemsLength:u.items.length,isAppend:c,limit:u.limit}),{offset:p,limit:u.limit,sortBy:u.sortConfig.key,sortDirection:u.sortConfig.direction,append:c,...u.filters,...l}},target:t}),G({clock:i,source:o,fn:u=>({offset:0,limit:u.limit,sortBy:u.sortConfig.key,sortDirection:u.sortConfig.direction,append:!1,...u.filters}),target:t}),G({clock:s,source:o,fn:u=>({offset:0,limit:u.limit,sortBy:u.sortConfig.key,sortDirection:u.sortConfig.direction,append:!1,...u.filters}),target:t}),{$state:o,loadMore:r,setSort:i,setFilters:s,reset:a,loadDataFx:t}};var _e=(e=>(e.TEXT_DELTA="text_delta",e.TOOL_CALL="tool_call",e.COMPLETED="completed",e.TOOL_CALL_DELTA="tool_call_delta",e.ERROR="error",e))(_e||{}),Qr=(e=>(e.OPENAI="openai",e.ANTHROPIC="anthropic",e))(Qr||{}),gt=(e=>(e.TEXT="text",e.TOOL_RESULT="tool_result",e.ATTACHMENT="attachment",e))(gt||{}),an=(e=>(e.message="message",e.link="link",e.partition="partition",e))(an||{});const Z=tn("chat-core"),Bn=Z.createEvent("INIT_CHAT"),Un=Z.createEvent("SEND_MESSAGE"),Ae=Z.createEvent("ADD_MESSAGE"),Sn=Z.createEvent("RECEIVE_CHUNK"),In=Z.createEvent("COMPLETE_RESPONSE"),Be=Z.createEvent("ERROR_OCCURRED"),Ot=Z.createEvent("REGISTER_FUNCTION"),jn=Z.createEvent("TOOL_CALL_RECEIVED"),Hn=Z.createEvent("TOOL_CALL_EXECUTED"),en=e=>e?e.replace(/\\r\\n/g,`\r
`).replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\\\/g,"\\"):"",Jr=e=>en(e),Ft=(e,n="Content")=>{console.log(`${n}:`,{raw:e,length:e.length,hasLineBreaks:e.includes(`
`),lineBreaksCount:(e.match(/\n/g)||[]).length,hasEscapedLineBreaks:e.includes("\\n"),escapedLineBreaksCount:(e.match(/\\n/g)||[]).length})},Ra=(e,{threadId:n,serviceType:t,model:r})=>({threadId:n,serviceType:t,model:r,sessionId:void 0,messages:[],isLoading:!1,currentResponse:"",pendingToolCalls:[]}),va=(e,n)=>{const t={id:`msg_${Date.now()}`,type:"user",content:en(n),timestamp:Date.now()};return{...e,messages:[...e.messages,t],isLoading:!0,currentResponse:"",pendingToolCalls:[]}},Na=(e,n)=>{if(n.type===_e.TEXT_DELTA){const t=n.content||"";return(t.includes("\\n")||t.includes(`
`))&&console.log("Найден перенос в чанке:",{content:t,hasEscaped:t.includes("\\n"),hasReal:t.includes(`
`)}),{...e,currentResponse:e.currentResponse+t}}return e},Pa=e=>{if(!e.currentResponse.trim()&&e.pendingToolCalls.length===0)return{...e,isLoading:!1};const n=Jr(e.currentResponse);Ft(e.currentResponse,"Raw accumulated content"),Ft(n,"Processed content");const t={id:`msg_${Date.now()}`,type:"assistant",content:n,timestamp:Date.now()};return{...e,messages:[...e.messages,t],isLoading:!1,currentResponse:""}},za=e=>({...e,isLoading:!1,currentResponse:"",pendingToolCalls:[]}),Ma=e=>async({serviceType:n,model:t})=>await e.createSession(n,t),Oa=e=>async n=>{if(!n.currentResponse.trim())return;const t=Jr(n.currentResponse);await e.saveMessage({threadId:n.threadId,user:"assistant",type:an.message,data:t,timestamp:Date.now()})},Fa=(e,n,t)=>async({content:r,state:i})=>{if(!i.sessionId)return;await n.saveMessage({threadId:i.threadId,user:"user",type:an.message,data:en(r),timestamp:Date.now()});const a=[{type:gt.TEXT,data:en(r)}],o={tools:Object.values(t.getState()).map(({execute:u,...l})=>l)};try{for await(const u of e.sendMessage(i.sessionId,a,o)){if(Sn(u),u.type===_e.COMPLETED){In();break}if(u.type===_e.ERROR){Be(u.message);break}}}catch(u){const l=u instanceof Error?u.message:"Unknown error";Be(l)}},Ba=e=>async n=>{console.log("Executing tool call:",n);const r=e.getState()[n.name];if(r)try{const i=await r.execute(n.args);return console.log("Tool call result:",i),{toolCallId:n.id,result:i}}catch(i){const a=i instanceof Error?i.message:"Unknown error";throw console.error("Tool call execution error:",a),new Error(a)}else{const i=`Function "${n.name}" not found`;throw console.error(i),new Error(i)}},Ua=(e,n)=>async({toolCallId:t,result:r,state:i})=>{if(console.log("Sending tool result:",{toolCallId:t,result:r}),!i.sessionId){console.error("No session ID available for tool result");return}let a;typeof r=="string"?a=en(r):a=JSON.stringify(r,null,2),await n.saveMessage({threadId:i.threadId,user:"assistant",type:an.message,data:`Tool call ${t} result:
${a}`,timestamp:Date.now()});const s=[{type:gt.TOOL_RESULT,tool_call_id:t,data:a}];try{for await(const o of e.sendMessage(i.sessionId,s,{})){if(Sn(o),o.type===_e.COMPLETED){In();break}if(o.type===_e.ERROR){Be(o.message);break}}}catch(o){const u=o instanceof Error?o.message:"Unknown error";Be(u)}},ja={threadId:"",serviceType:"",model:"",sessionId:void 0,messages:[],isLoading:!1,currentResponse:"",pendingToolCalls:[]},Ha=(e,n)=>{const t=Z.createStore(ja,{name:"CHAT"}).on(Bn,Ra).on(Un,va).on(Ae,(l,c)=>({...l,messages:[...l.messages,c]})).on(Sn,Na).on(In,Pa).on(Be,za).on(jn,(l,c)=>({...l,pendingToolCalls:[...l.pendingToolCalls,c]})).on(Hn,(l,{toolCallId:c})=>({...l,pendingToolCalls:l.pendingToolCalls.filter(p=>p.id!==c)})),r=Z.createStore({},{name:"FUNCTIONS"}).on(Ot,(l,{name:c,handler:p})=>({...l,[c]:p})),i=Z.createEffect("CREATE_SESSION_FX"),a=Z.createEffect("SEND_MESSAGE_FX"),s=Z.createEffect("EXECUTE_TOOL_CALL_FX"),o=Z.createEffect("SEND_TOOL_RESULT_FX"),u=Z.createEffect("SAVE_ASSISTANT_MESSAGE_FX");return i.use(Ma(e)),a.use(Fa(e,n,r)),s.use(Ba(r)),o.use(Ua(e,n)),u.use(Oa(n)),G({clock:Bn,target:i}),G({clock:i.doneData,source:t,fn:(l,c)=>({...l,sessionId:c}),target:t}),G({clock:Un,source:t,fn:(l,c)=>({content:c,state:l}),target:a}),G({clock:Sn,filter:l=>l.type===_e.TOOL_CALL,fn:l=>l,target:jn}),G({clock:jn,target:s}),G({clock:s.doneData,source:t,fn:(l,{toolCallId:c,result:p})=>({toolCallId:c,result:p,state:l}),target:o}),G({clock:s.doneData,fn:({toolCallId:l,result:c})=>({toolCallId:l,result:c}),target:Hn}),G({clock:s.failData,fn:l=>{console.error("Tool call execution failed:",l);const c=l instanceof Error?l.message:"Unknown error";return Be(c),{toolCallId:"",result:null,error:c}},target:Hn}),G({clock:In,source:t,target:u}),{$chat:t,$functions:r,init:(l,c,p)=>Bn({threadId:l,serviceType:c,model:p}),send:l=>Un(l),registerFunction:(l,c)=>Ot({name:l,handler:c}),get messages(){return t.getState().messages},get isLoading(){return t.getState().isLoading},get currentResponse(){return t.getState().currentResponse}}},sn=tn("aichat");$r(sn);$r(Z);function Va(e,n){const t={};return(e[e.length-1]===""?[...e,""]:e).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const $a=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qa=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Xa={};function Bt(e,n){return(Xa.jsx?qa:$a).test(e)}const Wa=/[ \t\n\f\r]/g;function Ga(e){return typeof e=="object"?e.type==="text"?Ut(e.value):!1:Ut(e)}function Ut(e){return e.replace(Wa,"")===""}class on{constructor(n,t,r){this.normal=t,this.property=n,r&&(this.space=r)}}on.prototype.normal={};on.prototype.property={};on.prototype.space=void 0;function Kr(e,n){const t={},r={};for(const i of e)Object.assign(t,i.property),Object.assign(r,i.normal);return new on(t,r,n)}function st(e){return e.toLowerCase()}class re{constructor(n,t){this.attribute=t,this.property=n}}re.prototype.attribute="";re.prototype.booleanish=!1;re.prototype.boolean=!1;re.prototype.commaOrSpaceSeparated=!1;re.prototype.commaSeparated=!1;re.prototype.defined=!1;re.prototype.mustUseProperty=!1;re.prototype.number=!1;re.prototype.overloadedBoolean=!1;re.prototype.property="";re.prototype.spaceSeparated=!1;re.prototype.space=void 0;let Ya=0;const N=Le(),Y=Le(),ot=Le(),k=Le(),X=Le(),Oe=Le(),ae=Le();function Le(){return 2**++Ya}const lt=Object.freeze(Object.defineProperty({__proto__:null,boolean:N,booleanish:Y,commaOrSpaceSeparated:ae,commaSeparated:Oe,number:k,overloadedBoolean:ot,spaceSeparated:X},Symbol.toStringTag,{value:"Module"})),Vn=Object.keys(lt);class yt extends re{constructor(n,t,r,i){let a=-1;if(super(n,t),jt(this,"space",i),typeof r=="number")for(;++a<Vn.length;){const s=Vn[a];jt(this,Vn[a],(r&lt[s])===lt[s])}}}yt.prototype.defined=!0;function jt(e,n,t){t&&(e[n]=t)}function Ue(e){const n={},t={};for(const[r,i]of Object.entries(e.properties)){const a=new yt(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),n[r]=a,t[st(r)]=r,t[st(a.attribute)]=r}return new on(n,t,e.space)}const Zr=Ue({properties:{ariaActiveDescendant:null,ariaAtomic:Y,ariaAutoComplete:null,ariaBusy:Y,ariaChecked:Y,ariaColCount:k,ariaColIndex:k,ariaColSpan:k,ariaControls:X,ariaCurrent:null,ariaDescribedBy:X,ariaDetails:null,ariaDisabled:Y,ariaDropEffect:X,ariaErrorMessage:null,ariaExpanded:Y,ariaFlowTo:X,ariaGrabbed:Y,ariaHasPopup:null,ariaHidden:Y,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:X,ariaLevel:k,ariaLive:null,ariaModal:Y,ariaMultiLine:Y,ariaMultiSelectable:Y,ariaOrientation:null,ariaOwns:X,ariaPlaceholder:null,ariaPosInSet:k,ariaPressed:Y,ariaReadOnly:Y,ariaRelevant:null,ariaRequired:Y,ariaRoleDescription:X,ariaRowCount:k,ariaRowIndex:k,ariaRowSpan:k,ariaSelected:Y,ariaSetSize:k,ariaSort:null,ariaValueMax:k,ariaValueMin:k,ariaValueNow:k,ariaValueText:null,role:null},transform(e,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function ei(e,n){return n in e?e[n]:n}function ni(e,n){return ei(e,n.toLowerCase())}const Qa=Ue({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Oe,acceptCharset:X,accessKey:X,action:null,allow:null,allowFullScreen:N,allowPaymentRequest:N,allowUserMedia:N,alt:null,as:null,async:N,autoCapitalize:null,autoComplete:X,autoFocus:N,autoPlay:N,blocking:X,capture:null,charSet:null,checked:N,cite:null,className:X,cols:k,colSpan:null,content:null,contentEditable:Y,controls:N,controlsList:X,coords:k|Oe,crossOrigin:null,data:null,dateTime:null,decoding:null,default:N,defer:N,dir:null,dirName:null,disabled:N,download:ot,draggable:Y,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:N,formTarget:null,headers:X,height:k,hidden:ot,high:k,href:null,hrefLang:null,htmlFor:X,httpEquiv:X,id:null,imageSizes:null,imageSrcSet:null,inert:N,inputMode:null,integrity:null,is:null,isMap:N,itemId:null,itemProp:X,itemRef:X,itemScope:N,itemType:X,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:N,low:k,manifest:null,max:null,maxLength:k,media:null,method:null,min:null,minLength:k,multiple:N,muted:N,name:null,nonce:null,noModule:N,noValidate:N,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:N,optimum:k,pattern:null,ping:X,placeholder:null,playsInline:N,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:N,referrerPolicy:null,rel:X,required:N,reversed:N,rows:k,rowSpan:k,sandbox:X,scope:null,scoped:N,seamless:N,selected:N,shadowRootClonable:N,shadowRootDelegatesFocus:N,shadowRootMode:null,shape:null,size:k,sizes:null,slot:null,span:k,spellCheck:Y,src:null,srcDoc:null,srcLang:null,srcSet:null,start:k,step:null,style:null,tabIndex:k,target:null,title:null,translate:null,type:null,typeMustMatch:N,useMap:null,value:Y,width:k,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:X,axis:null,background:null,bgColor:null,border:k,borderColor:null,bottomMargin:k,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:N,declare:N,event:null,face:null,frame:null,frameBorder:null,hSpace:k,leftMargin:k,link:null,longDesc:null,lowSrc:null,marginHeight:k,marginWidth:k,noResize:N,noHref:N,noShade:N,noWrap:N,object:null,profile:null,prompt:null,rev:null,rightMargin:k,rules:null,scheme:null,scrolling:Y,standby:null,summary:null,text:null,topMargin:k,valueType:null,version:null,vAlign:null,vLink:null,vSpace:k,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:N,disableRemotePlayback:N,prefix:null,property:null,results:k,security:null,unselectable:null},space:"html",transform:ni}),Ja=Ue({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ae,accentHeight:k,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:k,amplitude:k,arabicForm:null,ascent:k,attributeName:null,attributeType:null,azimuth:k,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:k,by:null,calcMode:null,capHeight:k,className:X,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:k,diffuseConstant:k,direction:null,display:null,dur:null,divisor:k,dominantBaseline:null,download:N,dx:null,dy:null,edgeMode:null,editable:null,elevation:k,enableBackground:null,end:null,event:null,exponent:k,externalResourcesRequired:null,fill:null,fillOpacity:k,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Oe,g2:Oe,glyphName:Oe,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:k,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:k,horizOriginX:k,horizOriginY:k,id:null,ideographic:k,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:k,k,k1:k,k2:k,k3:k,k4:k,kernelMatrix:ae,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:k,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:k,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:k,overlineThickness:k,paintOrder:null,panose1:null,path:null,pathLength:k,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:X,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:k,pointsAtY:k,pointsAtZ:k,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ae,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ae,rev:ae,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ae,requiredFeatures:ae,requiredFonts:ae,requiredFormats:ae,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:k,specularExponent:k,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:k,strikethroughThickness:k,string:null,stroke:null,strokeDashArray:ae,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:k,strokeOpacity:k,strokeWidth:null,style:null,surfaceScale:k,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ae,tabIndex:k,tableValues:null,target:null,targetX:k,targetY:k,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ae,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:k,underlineThickness:k,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:k,values:null,vAlphabetic:k,vMathematical:k,vectorEffect:null,vHanging:k,vIdeographic:k,version:null,vertAdvY:k,vertOriginX:k,vertOriginY:k,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:k,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ei}),ti=Ue({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,n){return"xlink:"+n.slice(5).toLowerCase()}}),ri=Ue({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ni}),ii=Ue({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,n){return"xml:"+n.slice(3).toLowerCase()}}),Ka={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Za=/[A-Z]/g,Ht=/-[a-z]/g,es=/^data[-\w.:]+$/i;function ns(e,n){const t=st(n);let r=n,i=re;if(t in e.normal)return e.property[e.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&es.test(n)){if(n.charAt(4)==="-"){const a=n.slice(5).replace(Ht,rs);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=n.slice(4);if(!Ht.test(a)){let s=a.replace(Za,ts);s.charAt(0)!=="-"&&(s="-"+s),n="data"+s}}i=yt}return new i(r,n)}function ts(e){return"-"+e.toLowerCase()}function rs(e){return e.charAt(1).toUpperCase()}const is=Kr([Zr,Qa,ti,ri,ii],"html"),xt=Kr([Zr,Ja,ti,ri,ii],"svg");function as(e){return e.join(" ").trim()}var Pe={},$n,Vt;function ss(){if(Vt)return $n;Vt=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,o=/^\s+|\s+$/g,u=`
`,l="/",c="*",p="",h="comment",f="declaration";function w(A,x){if(typeof A!="string")throw new TypeError("First argument must be a string");if(!A)return[];x=x||{};var L=1,E=1;function z(_){var I=_.match(n);I&&(L+=I.length);var j=_.lastIndexOf(u);E=~j?_.length-j:E+_.length}function F(){var _={line:L,column:E};return function(I){return I.position=new y(_),B(),I}}function y(_){this.start=_,this.end={line:L,column:E},this.source=x.source}y.prototype.content=A;function M(_){var I=new Error(x.source+":"+L+":"+E+": "+_);if(I.reason=_,I.filename=x.source,I.line=L,I.column=E,I.source=A,!x.silent)throw I}function $(_){var I=_.exec(A);if(I){var j=I[0];return z(j),A=A.slice(j.length),I}}function B(){$(t)}function U(_){var I;for(_=_||[];I=D();)I!==!1&&_.push(I);return _}function D(){var _=F();if(!(l!=A.charAt(0)||c!=A.charAt(1))){for(var I=2;p!=A.charAt(I)&&(c!=A.charAt(I)||l!=A.charAt(I+1));)++I;if(I+=2,p===A.charAt(I-1))return M("End of comment missing");var j=A.slice(2,I-2);return E+=2,z(j),A=A.slice(I),E+=2,_({type:h,comment:j})}}function T(){var _=F(),I=$(r);if(I){if(D(),!$(i))return M("property missing ':'");var j=$(a),Q=_({type:f,property:b(I[0].replace(e,p)),value:j?b(j[0].replace(e,p)):p});return $(s),Q}}function q(){var _=[];U(_);for(var I;I=T();)I!==!1&&(_.push(I),U(_));return _}return B(),q()}function b(A){return A?A.replace(o,p):p}return $n=w,$n}var $t;function os(){if($t)return Pe;$t=1;var e=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=t;const n=e(ss());function t(r,i){let a=null;if(!r||typeof r!="string")return a;const s=(0,n.default)(r),o=typeof i=="function";return s.forEach(u=>{if(u.type!=="declaration")return;const{property:l,value:c}=u;o?i(l,c,u):c&&(a=a||{},a[l]=c)}),a}return Pe}var We={},qt;function ls(){if(qt)return We;qt=1,Object.defineProperty(We,"__esModule",{value:!0}),We.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,n=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(l){return!l||t.test(l)||e.test(l)},s=function(l,c){return c.toUpperCase()},o=function(l,c){return"".concat(c,"-")},u=function(l,c){return c===void 0&&(c={}),a(l)?l:(l=l.toLowerCase(),c.reactCompat?l=l.replace(i,o):l=l.replace(r,o),l.replace(n,s))};return We.camelCase=u,We}var Ge,Xt;function us(){if(Xt)return Ge;Xt=1;var e=Ge&&Ge.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},n=e(os()),t=ls();function r(i,a){var s={};return!i||typeof i!="string"||(0,n.default)(i,function(o,u){o&&u&&(s[(0,t.camelCase)(o,a)]=u)}),s}return r.default=r,Ge=r,Ge}var cs=us();const ps=qr(cs),ai=si("end"),kt=si("start");function si(e){return n;function n(t){const r=t&&t.position&&t.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function fs(e){const n=kt(e),t=ai(e);if(n&&t)return{start:n,end:t}}function Je(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Wt(e.position):"start"in e||"end"in e?Wt(e):"line"in e||"column"in e?ut(e):""}function ut(e){return Gt(e&&e.line)+":"+Gt(e&&e.column)}function Wt(e){return ut(e&&e.start)+"-"+ut(e&&e.end)}function Gt(e){return e&&typeof e=="number"?e:1}class ee extends Error{constructor(n,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",a={},s=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof n=="string"?i=n:!a.cause&&n&&(s=!0,i=n.message,a.cause=n),!a.ruleId&&!a.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?a.ruleId=r:(a.source=r.slice(0,u),a.ruleId=r.slice(u+1))}if(!a.place&&a.ancestors&&a.ancestors){const u=a.ancestors[a.ancestors.length-1];u&&(a.place=u.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=Je(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ee.prototype.file="";ee.prototype.name="";ee.prototype.reason="";ee.prototype.message="";ee.prototype.stack="";ee.prototype.column=void 0;ee.prototype.line=void 0;ee.prototype.ancestors=void 0;ee.prototype.cause=void 0;ee.prototype.fatal=void 0;ee.prototype.place=void 0;ee.prototype.ruleId=void 0;ee.prototype.source=void 0;const wt={}.hasOwnProperty,hs=new Map,ds=/[A-Z]/g,ms=new Set(["table","tbody","thead","tfoot","tr"]),gs=new Set(["td","th"]),oi="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ys(e,n){if(!n||n.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=n.filePath||void 0;let r;if(n.development){if(typeof n.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Es(t,n.jsxDEV)}else{if(typeof n.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof n.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Is(t,n.jsx,n.jsxs)}const i={Fragment:n.Fragment,ancestors:[],components:n.components||{},create:r,elementAttributeNameCase:n.elementAttributeNameCase||"react",evaluater:n.createEvaluater?n.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:n.ignoreInvalidStyle||!1,passKeys:n.passKeys!==!1,passNode:n.passNode||!1,schema:n.space==="svg"?xt:is,stylePropertyNameCase:n.stylePropertyNameCase||"dom",tableCellAlignToStyle:n.tableCellAlignToStyle!==!1},a=li(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function li(e,n,t){if(n.type==="element")return xs(e,n,t);if(n.type==="mdxFlowExpression"||n.type==="mdxTextExpression")return ks(e,n);if(n.type==="mdxJsxFlowElement"||n.type==="mdxJsxTextElement")return bs(e,n,t);if(n.type==="mdxjsEsm")return ws(e,n);if(n.type==="root")return Cs(e,n,t);if(n.type==="text")return Ss(e,n)}function xs(e,n,t){const r=e.schema;let i=r;n.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=xt,e.schema=i),e.ancestors.push(n);const a=ci(e,n.tagName,!1),s=As(e,n);let o=Ct(e,n);return ms.has(n.tagName)&&(o=o.filter(function(u){return typeof u=="string"?!Ga(u):!0})),ui(e,s,a,n),bt(s,o),e.ancestors.pop(),e.schema=r,e.create(n,a,s,t)}function ks(e,n){if(n.data&&n.data.estree&&e.evaluater){const r=n.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}nn(e,n.position)}function ws(e,n){if(n.data&&n.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(n.data.estree);nn(e,n.position)}function bs(e,n,t){const r=e.schema;let i=r;n.name==="svg"&&r.space==="html"&&(i=xt,e.schema=i),e.ancestors.push(n);const a=n.name===null?e.Fragment:ci(e,n.name,!0),s=Ts(e,n),o=Ct(e,n);return ui(e,s,a,n),bt(s,o),e.ancestors.pop(),e.schema=r,e.create(n,a,s,t)}function Cs(e,n,t){const r={};return bt(r,Ct(e,n)),e.create(n,e.Fragment,r,t)}function Ss(e,n){return n.value}function ui(e,n,t,r){typeof t!="string"&&t!==e.Fragment&&e.passNode&&(n.node=r)}function bt(e,n){if(n.length>0){const t=n.length>1?n:n[0];t&&(e.children=t)}}function Is(e,n,t){return r;function r(i,a,s,o){const l=Array.isArray(s.children)?t:n;return o?l(a,s,o):l(a,s)}}function Es(e,n){return t;function t(r,i,a,s){const o=Array.isArray(a.children),u=kt(r);return n(i,a,s,o,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function As(e,n){const t={};let r,i;for(i in n.properties)if(i!=="children"&&wt.call(n.properties,i)){const a=Ds(e,i,n.properties[i]);if(a){const[s,o]=a;e.tableCellAlignToStyle&&s==="align"&&typeof o=="string"&&gs.has(n.tagName)?r=o:t[s]=o}}if(r){const a=t.style||(t.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function Ts(e,n){const t={};for(const r of n.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const s=a.expression;s.type;const o=s.properties[0];o.type,Object.assign(t,e.evaluater.evaluateExpression(o.argument))}else nn(e,n.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const o=r.value.data.estree.body[0];o.type,a=e.evaluater.evaluateExpression(o.expression)}else nn(e,n.position);else a=r.value===null?!0:r.value;t[i]=a}return t}function Ct(e,n){const t=[];let r=-1;const i=e.passKeys?new Map:hs;for(;++r<n.children.length;){const a=n.children[r];let s;if(e.passKeys){const u=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(u){const l=i.get(u)||0;s=u+"-"+l,i.set(u,l+1)}}const o=li(e,a,s);o!==void 0&&t.push(o)}return t}function Ds(e,n,t){const r=ns(e.schema,n);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?Va(t):as(t)),r.property==="style"){let i=typeof t=="object"?t:_s(e,String(t));return e.stylePropertyNameCase==="css"&&(i=Ls(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Ka[r.property]||r.property:r.attribute,t]}}function _s(e,n){try{return ps(n,{reactCompat:!0})}catch(t){if(e.ignoreInvalidStyle)return{};const r=t,i=new ee("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=oi+"#cannot-parse-style-attribute",i}}function ci(e,n,t){let r;if(!t)r={type:"Literal",value:n};else if(n.includes(".")){const i=n.split(".");let a=-1,s;for(;++a<i.length;){const o=Bt(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};s=s?{type:"MemberExpression",object:s,property:o,computed:!!(a&&o.type==="Literal"),optional:!1}:o}r=s}else r=Bt(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};if(r.type==="Literal"){const i=r.value;return wt.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);nn(e)}function nn(e,n){const t=new ee("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:n,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=e.filePath||void 0,t.url=oi+"#cannot-handle-mdx-estrees-without-createevaluater",t}function Ls(e){const n={};let t;for(t in e)wt.call(e,t)&&(n[Rs(t)]=e[t]);return n}function Rs(e){let n=e.replace(ds,vs);return n.slice(0,3)==="ms-"&&(n="-"+n),n}function vs(e){return"-"+e.toLowerCase()}const qn={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Ns={};function Ps(e,n){const t=Ns,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return pi(e,r,i)}function pi(e,n,t){if(zs(e)){if("value"in e)return e.type==="html"&&!t?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Yt(e.children,n,t)}return Array.isArray(e)?Yt(e,n,t):""}function Yt(e,n,t){const r=[];let i=-1;for(;++i<e.length;)r[i]=pi(e[i],n,t);return r.join("")}function zs(e){return!!(e&&typeof e=="object")}const Qt=document.createElement("i");function St(e){const n="&"+e+";";Qt.innerHTML=n;const t=Qt.textContent;return t.charCodeAt(t.length-1)===59&&e!=="semi"||t===n?!1:t}function me(e,n,t,r){const i=e.length;let a=0,s;if(n<0?n=-n>i?0:i+n:n=n>i?i:n,t=t>0?t:0,r.length<1e4)s=Array.from(r),s.unshift(n,t),e.splice(...s);else for(t&&e.splice(n,t);a<r.length;)s=r.slice(a,a+1e4),s.unshift(n,0),e.splice(...s),a+=1e4,n+=1e4}function oe(e,n){return e.length>0?(me(e,e.length,0,n),e):n}const Jt={}.hasOwnProperty;function Ms(e){const n={};let t=-1;for(;++t<e.length;)Os(n,e[t]);return n}function Os(e,n){let t;for(t in n){const i=(Jt.call(e,t)?e[t]:void 0)||(e[t]={}),a=n[t];let s;if(a)for(s in a){Jt.call(i,s)||(i[s]=[]);const o=a[s];Fs(i[s],Array.isArray(o)?o:o?[o]:[])}}}function Fs(e,n){let t=-1;const r=[];for(;++t<n.length;)(n[t].add==="after"?e:r).push(n[t]);me(e,0,0,r)}function fi(e,n){const t=Number.parseInt(e,n);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function Fe(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const he=Se(/[A-Za-z]/),se=Se(/[\dA-Za-z]/),Bs=Se(/[#-'*+\--9=?A-Z^-~]/);function ct(e){return e!==null&&(e<32||e===127)}const pt=Se(/\d/),Us=Se(/[\dA-Fa-f]/),js=Se(/[!-/:-@[-`{-~]/);function R(e){return e!==null&&e<-2}function te(e){return e!==null&&(e<0||e===32)}function O(e){return e===-2||e===-1||e===32}const Hs=Se(new RegExp("\\p{P}|\\p{S}","u")),Vs=Se(/\s/);function Se(e){return n;function n(t){return t!==null&&t>-1&&e.test(String.fromCharCode(t))}}function je(e){const n=[];let t=-1,r=0,i=0;for(;++t<e.length;){const a=e.charCodeAt(t);let s="";if(a===37&&se(e.charCodeAt(t+1))&&se(e.charCodeAt(t+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const o=e.charCodeAt(t+1);a<56320&&o>56319&&o<57344?(s=String.fromCharCode(a,o),i=1):s="�"}else s=String.fromCharCode(a);s&&(n.push(e.slice(r,t),encodeURIComponent(s)),r=t+i+1,s=""),i&&(t+=i,i=0)}return n.join("")+e.slice(r)}function W(e,n,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(u){return O(u)?(e.enter(t),o(u)):n(u)}function o(u){return O(u)&&a++<i?(e.consume(u),o):(e.exit(t),n(u))}}const $s={tokenize:qs};function qs(e){const n=e.attempt(this.parser.constructs.contentInitial,r,i);let t;return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),W(e,n,"linePrefix")}function i(o){return e.enter("paragraph"),a(o)}function a(o){const u=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=u),t=u,s(o)}function s(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return R(o)?(e.consume(o),e.exit("chunkText"),a):(e.consume(o),s)}}const Xs={tokenize:Ws},Kt={tokenize:Gs};function Ws(e){const n=this,t=[];let r=0,i,a,s;return o;function o(E){if(r<t.length){const z=t[r];return n.containerState=z[1],e.attempt(z[0].continuation,u,l)(E)}return l(E)}function u(E){if(r++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,i&&L();const z=n.events.length;let F=z,y;for(;F--;)if(n.events[F][0]==="exit"&&n.events[F][1].type==="chunkFlow"){y=n.events[F][1].end;break}x(r);let M=z;for(;M<n.events.length;)n.events[M][1].end={...y},M++;return me(n.events,F+1,0,n.events.slice(z)),n.events.length=M,l(E)}return o(E)}function l(E){if(r===t.length){if(!i)return h(E);if(i.currentConstruct&&i.currentConstruct.concrete)return w(E);n.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(Kt,c,p)(E)}function c(E){return i&&L(),x(r),h(E)}function p(E){return n.parser.lazy[n.now().line]=r!==t.length,s=n.now().offset,w(E)}function h(E){return n.containerState={},e.attempt(Kt,f,w)(E)}function f(E){return r++,t.push([n.currentConstruct,n.containerState]),h(E)}function w(E){if(E===null){i&&L(),x(0),e.consume(E);return}return i=i||n.parser.flow(n.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),b(E)}function b(E){if(E===null){A(e.exit("chunkFlow"),!0),x(0),e.consume(E);return}return R(E)?(e.consume(E),A(e.exit("chunkFlow")),r=0,n.interrupt=void 0,o):(e.consume(E),b)}function A(E,z){const F=n.sliceStream(E);if(z&&F.push(null),E.previous=a,a&&(a.next=E),a=E,i.defineSkip(E.start),i.write(F),n.parser.lazy[E.start.line]){let y=i.events.length;for(;y--;)if(i.events[y][1].start.offset<s&&(!i.events[y][1].end||i.events[y][1].end.offset>s))return;const M=n.events.length;let $=M,B,U;for(;$--;)if(n.events[$][0]==="exit"&&n.events[$][1].type==="chunkFlow"){if(B){U=n.events[$][1].end;break}B=!0}for(x(r),y=M;y<n.events.length;)n.events[y][1].end={...U},y++;me(n.events,$+1,0,n.events.slice(M)),n.events.length=y}}function x(E){let z=t.length;for(;z-- >E;){const F=t[z];n.containerState=F[1],F[0].exit.call(n,e)}t.length=E}function L(){i.write([null]),a=void 0,i=void 0,n.containerState._closeFlow=void 0}}function Gs(e,n,t){return W(e,e.attempt(this.parser.constructs.document,n,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Zt(e){if(e===null||te(e)||Vs(e))return 1;if(Hs(e))return 2}function It(e,n,t){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(n=a(n,t),r.push(a))}return n}const ft={name:"attention",resolveAll:Ys,tokenize:Qs};function Ys(e,n){let t=-1,r,i,a,s,o,u,l,c;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(r=t;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&n.sliceSerialize(e[r][1]).charCodeAt(0)===n.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[r][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;const p={...e[r][1].end},h={...e[t][1].start};er(p,-u),er(h,u),s={type:u>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},o={type:u>1?"strongSequence":"emphasisSequence",start:{...e[t][1].start},end:h},a={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[t][1].start}},i={type:u>1?"strong":"emphasis",start:{...s.start},end:{...o.end}},e[r][1].end={...s.start},e[t][1].start={...o.end},l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=oe(l,[["enter",e[r][1],n],["exit",e[r][1],n]])),l=oe(l,[["enter",i,n],["enter",s,n],["exit",s,n],["enter",a,n]]),l=oe(l,It(n.parser.constructs.insideSpan.null,e.slice(r+1,t),n)),l=oe(l,[["exit",a,n],["enter",o,n],["exit",o,n],["exit",i,n]]),e[t][1].end.offset-e[t][1].start.offset?(c=2,l=oe(l,[["enter",e[t][1],n],["exit",e[t][1],n]])):c=0,me(e,r-1,t-r+3,l),t=r+l.length-c-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function Qs(e,n){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Zt(r);let a;return s;function s(u){return a=u,e.enter("attentionSequence"),o(u)}function o(u){if(u===a)return e.consume(u),o;const l=e.exit("attentionSequence"),c=Zt(u),p=!c||c===2&&i||t.includes(u),h=!i||i===2&&c||t.includes(r);return l._open=!!(a===42?p:p&&(i||!h)),l._close=!!(a===42?h:h&&(c||!p)),n(u)}}function er(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const Js={name:"autolink",tokenize:Ks};function Ks(e,n,t){let r=0;return i;function i(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(f){return he(f)?(e.consume(f),s):f===64?t(f):l(f)}function s(f){return f===43||f===45||f===46||se(f)?(r=1,o(f)):l(f)}function o(f){return f===58?(e.consume(f),r=0,u):(f===43||f===45||f===46||se(f))&&r++<32?(e.consume(f),o):(r=0,l(f))}function u(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),n):f===null||f===32||f===60||ct(f)?t(f):(e.consume(f),u)}function l(f){return f===64?(e.consume(f),c):Bs(f)?(e.consume(f),l):t(f)}function c(f){return se(f)?p(f):t(f)}function p(f){return f===46?(e.consume(f),r=0,c):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),n):h(f)}function h(f){if((f===45||se(f))&&r++<63){const w=f===45?h:p;return e.consume(f),w}return t(f)}}const Ln={partial:!0,tokenize:Zs};function Zs(e,n,t){return r;function r(a){return O(a)?W(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||R(a)?n(a):t(a)}}const hi={continuation:{tokenize:no},exit:to,name:"blockQuote",tokenize:eo};function eo(e,n,t){const r=this;return i;function i(s){if(s===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),a}return t(s)}function a(s){return O(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),n):(e.exit("blockQuotePrefix"),n(s))}}function no(e,n,t){const r=this;return i;function i(s){return O(s)?W(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return e.attempt(hi,n,t)(s)}}function to(e){e.exit("blockQuote")}const di={name:"characterEscape",tokenize:ro};function ro(e,n,t){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return js(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):t(a)}}const mi={name:"characterReference",tokenize:io};function io(e,n,t){const r=this;let i=0,a,s;return o;function o(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),u}function u(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),a=31,s=se,c(p))}function l(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,s=Us,c):(e.enter("characterReferenceValue"),a=7,s=pt,c(p))}function c(p){if(p===59&&i){const h=e.exit("characterReferenceValue");return s===se&&!St(r.sliceSerialize(h))?t(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),n)}return s(p)&&i++<a?(e.consume(p),c):t(p)}}const nr={partial:!0,tokenize:so},tr={concrete:!0,name:"codeFenced",tokenize:ao};function ao(e,n,t){const r=this,i={partial:!0,tokenize:F};let a=0,s=0,o;return u;function u(y){return l(y)}function l(y){const M=r.events[r.events.length-1];return a=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,o=y,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(y)}function c(y){return y===o?(s++,e.consume(y),c):s<3?t(y):(e.exit("codeFencedFenceSequence"),O(y)?W(e,p,"whitespace")(y):p(y))}function p(y){return y===null||R(y)?(e.exit("codeFencedFence"),r.interrupt?n(y):e.check(nr,b,z)(y)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===null||R(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(y)):O(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),W(e,f,"whitespace")(y)):y===96&&y===o?t(y):(e.consume(y),h)}function f(y){return y===null||R(y)?p(y):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(y))}function w(y){return y===null||R(y)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(y)):y===96&&y===o?t(y):(e.consume(y),w)}function b(y){return e.attempt(i,z,A)(y)}function A(y){return e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),x}function x(y){return a>0&&O(y)?W(e,L,"linePrefix",a+1)(y):L(y)}function L(y){return y===null||R(y)?e.check(nr,b,z)(y):(e.enter("codeFlowValue"),E(y))}function E(y){return y===null||R(y)?(e.exit("codeFlowValue"),L(y)):(e.consume(y),E)}function z(y){return e.exit("codeFenced"),n(y)}function F(y,M,$){let B=0;return U;function U(I){return y.enter("lineEnding"),y.consume(I),y.exit("lineEnding"),D}function D(I){return y.enter("codeFencedFence"),O(I)?W(y,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):T(I)}function T(I){return I===o?(y.enter("codeFencedFenceSequence"),q(I)):$(I)}function q(I){return I===o?(B++,y.consume(I),q):B>=s?(y.exit("codeFencedFenceSequence"),O(I)?W(y,_,"whitespace")(I):_(I)):$(I)}function _(I){return I===null||R(I)?(y.exit("codeFencedFence"),M(I)):$(I)}}}function so(e,n,t){const r=this;return i;function i(s){return s===null?t(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a)}function a(s){return r.parser.lazy[r.now().line]?t(s):n(s)}}const Xn={name:"codeIndented",tokenize:lo},oo={partial:!0,tokenize:uo};function lo(e,n,t){const r=this;return i;function i(l){return e.enter("codeIndented"),W(e,a,"linePrefix",5)(l)}function a(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?s(l):t(l)}function s(l){return l===null?u(l):R(l)?e.attempt(oo,s,u)(l):(e.enter("codeFlowValue"),o(l))}function o(l){return l===null||R(l)?(e.exit("codeFlowValue"),s(l)):(e.consume(l),o)}function u(l){return e.exit("codeIndented"),n(l)}}function uo(e,n,t){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?t(s):R(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):W(e,a,"linePrefix",5)(s)}function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?n(s):R(s)?i(s):t(s)}}const co={name:"codeText",previous:fo,resolve:po,tokenize:ho};function po(e){let n=e.length-4,t=3,r,i;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[n][1].type==="lineEnding"||e[n][1].type==="space")){for(r=t;++r<n;)if(e[r][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[n][1].type="codeTextPadding",t+=2,n-=2;break}}for(r=t-1,n++;++r<=n;)i===void 0?r!==n&&e[r][1].type!=="lineEnding"&&(i=r):(r===n||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),n-=r-i-2,r=i+2),i=void 0);return e}function fo(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ho(e,n,t){let r=0,i,a;return s;function s(p){return e.enter("codeText"),e.enter("codeTextSequence"),o(p)}function o(p){return p===96?(e.consume(p),r++,o):(e.exit("codeTextSequence"),u(p))}function u(p){return p===null?t(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),u):p===96?(a=e.enter("codeTextSequence"),i=0,c(p)):R(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(p))}function l(p){return p===null||p===32||p===96||R(p)?(e.exit("codeTextData"),u(p)):(e.consume(p),l)}function c(p){return p===96?(e.consume(p),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),n(p)):(a.type="codeTextData",l(p))}}class mo{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(n,r):n>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(n,t,r){const i=t||0;this.setCursor(Math.trunc(n));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Ye(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),Ye(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),Ye(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const t=this.left.splice(n,Number.POSITIVE_INFINITY);Ye(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);Ye(this.left,t.reverse())}}}function Ye(e,n){let t=0;if(n.length<1e4)e.push(...n);else for(;t<n.length;)e.push(...n.slice(t,t+1e4)),t+=1e4}function gi(e){const n={};let t=-1,r,i,a,s,o,u,l;const c=new mo(e);for(;++t<c.length;){for(;t in n;)t=n[t];if(r=c.get(t),t&&r[1].type==="chunkFlow"&&c.get(t-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(n,go(c,t)),t=n[t],l=!0);else if(r[1]._container){for(a=t,i=void 0;a--;)if(s=c.get(a),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=a);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},o=c.slice(i,t),o.unshift(r),c.splice(i,t-i+1,o))}}return me(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function go(e,n){const t=e.get(n)[1],r=e.get(n)[2];let i=n-1;const a=[];let s=t._tokenizer;s||(s=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const o=s.events,u=[],l={};let c,p,h=-1,f=t,w=0,b=0;const A=[b];for(;f;){for(;e.get(++i)[1]!==f;);a.push(i),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),p&&s.defineSkip(f.start),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(c),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),p=f,f=f.next}for(f=t;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(b=h+1,A.push(b),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(s.events=[],f?(f._tokenizer=void 0,f.previous=void 0):A.pop(),h=A.length;h--;){const x=o.slice(A[h],A[h+1]),L=a.pop();u.push([L,L+x.length-1]),e.splice(L,2,x)}for(u.reverse(),h=-1;++h<u.length;)l[w+u[h][0]]=w+u[h][1],w+=u[h][1]-u[h][0]-1;return l}const yo={resolve:ko,tokenize:wo},xo={partial:!0,tokenize:bo};function ko(e){return gi(e),e}function wo(e,n){let t;return r;function r(o){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?a(o):R(o)?e.check(xo,s,a)(o):(e.consume(o),i)}function a(o){return e.exit("chunkContent"),e.exit("content"),n(o)}function s(o){return e.consume(o),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function bo(e,n,t){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),W(e,a,"linePrefix")}function a(s){if(s===null||R(s))return t(s);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?n(s):e.interrupt(r.parser.constructs.flow,t,n)(s)}}function yi(e,n,t,r,i,a,s,o,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return p;function p(x){return x===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(x),e.exit(a),h):x===null||x===32||x===41||ct(x)?t(x):(e.enter(r),e.enter(s),e.enter(o),e.enter("chunkString",{contentType:"string"}),b(x))}function h(x){return x===62?(e.enter(a),e.consume(x),e.exit(a),e.exit(i),e.exit(r),n):(e.enter(o),e.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===62?(e.exit("chunkString"),e.exit(o),h(x)):x===null||x===60||R(x)?t(x):(e.consume(x),x===92?w:f)}function w(x){return x===60||x===62||x===92?(e.consume(x),f):f(x)}function b(x){return!c&&(x===null||x===41||te(x))?(e.exit("chunkString"),e.exit(o),e.exit(s),e.exit(r),n(x)):c<l&&x===40?(e.consume(x),c++,b):x===41?(e.consume(x),c--,b):x===null||x===32||x===40||ct(x)?t(x):(e.consume(x),x===92?A:b)}function A(x){return x===40||x===41||x===92?(e.consume(x),b):b(x)}}function xi(e,n,t,r,i,a){const s=this;let o=0,u;return l;function l(f){return e.enter(r),e.enter(i),e.consume(f),e.exit(i),e.enter(a),c}function c(f){return o>999||f===null||f===91||f===93&&!u||f===94&&!o&&"_hiddenFootnoteSupport"in s.parser.constructs?t(f):f===93?(e.exit(a),e.enter(i),e.consume(f),e.exit(i),e.exit(r),n):R(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),p(f))}function p(f){return f===null||f===91||f===93||R(f)||o++>999?(e.exit("chunkString"),c(f)):(e.consume(f),u||(u=!O(f)),f===92?h:p)}function h(f){return f===91||f===92||f===93?(e.consume(f),o++,p):p(f)}}function ki(e,n,t,r,i,a){let s;return o;function o(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),s=h===40?41:h,u):t(h)}function u(h){return h===s?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),n):(e.enter(a),l(h))}function l(h){return h===s?(e.exit(a),u(s)):h===null?t(h):R(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),W(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(h))}function c(h){return h===s||h===null||R(h)?(e.exit("chunkString"),l(h)):(e.consume(h),h===92?p:c)}function p(h){return h===s||h===92?(e.consume(h),c):c(h)}}function Ke(e,n){let t;return r;function r(i){return R(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t=!0,r):O(i)?W(e,r,t?"linePrefix":"lineSuffix")(i):n(i)}}const Co={name:"definition",tokenize:Io},So={partial:!0,tokenize:Eo};function Io(e,n,t){const r=this;let i;return a;function a(f){return e.enter("definition"),s(f)}function s(f){return xi.call(r,e,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function o(f){return i=Fe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),u):t(f)}function u(f){return te(f)?Ke(e,l)(f):l(f)}function l(f){return yi(e,c,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function c(f){return e.attempt(So,p,p)(f)}function p(f){return O(f)?W(e,h,"whitespace")(f):h(f)}function h(f){return f===null||R(f)?(e.exit("definition"),r.parser.defined.push(i),n(f)):t(f)}}function Eo(e,n,t){return r;function r(o){return te(o)?Ke(e,i)(o):t(o)}function i(o){return ki(e,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return O(o)?W(e,s,"whitespace")(o):s(o)}function s(o){return o===null||R(o)?n(o):t(o)}}const Ao={name:"hardBreakEscape",tokenize:To};function To(e,n,t){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return R(a)?(e.exit("hardBreakEscape"),n(a)):t(a)}}const Do={name:"headingAtx",resolve:_o,tokenize:Lo};function _o(e,n){let t=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),t-2>r&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&e[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[t][1].end},a={type:"chunkText",start:e[r][1].start,end:e[t][1].end,contentType:"text"},me(e,r,t-r+1,[["enter",i,n],["enter",a,n],["exit",a,n],["exit",i,n]])),e}function Lo(e,n,t){let r=0;return i;function i(c){return e.enter("atxHeading"),a(c)}function a(c){return e.enter("atxHeadingSequence"),s(c)}function s(c){return c===35&&r++<6?(e.consume(c),s):c===null||te(c)?(e.exit("atxHeadingSequence"),o(c)):t(c)}function o(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||R(c)?(e.exit("atxHeading"),n(c)):O(c)?W(e,o,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),o(c))}function l(c){return c===null||c===35||te(c)?(e.exit("atxHeadingText"),o(c)):(e.consume(c),l)}}const Ro=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],rr=["pre","script","style","textarea"],vo={concrete:!0,name:"htmlFlow",resolveTo:zo,tokenize:Mo},No={partial:!0,tokenize:Fo},Po={partial:!0,tokenize:Oo};function zo(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type==="htmlFlow"););return n>1&&e[n-2][1].type==="linePrefix"&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function Mo(e,n,t){const r=this;let i,a,s,o,u;return l;function l(m){return c(m)}function c(m){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(m),p}function p(m){return m===33?(e.consume(m),h):m===47?(e.consume(m),a=!0,b):m===63?(e.consume(m),i=3,r.interrupt?n:d):he(m)?(e.consume(m),s=String.fromCharCode(m),A):t(m)}function h(m){return m===45?(e.consume(m),i=2,f):m===91?(e.consume(m),i=5,o=0,w):he(m)?(e.consume(m),i=4,r.interrupt?n:d):t(m)}function f(m){return m===45?(e.consume(m),r.interrupt?n:d):t(m)}function w(m){const ce="CDATA[";return m===ce.charCodeAt(o++)?(e.consume(m),o===ce.length?r.interrupt?n:T:w):t(m)}function b(m){return he(m)?(e.consume(m),s=String.fromCharCode(m),A):t(m)}function A(m){if(m===null||m===47||m===62||te(m)){const ce=m===47,Ie=s.toLowerCase();return!ce&&!a&&rr.includes(Ie)?(i=1,r.interrupt?n(m):T(m)):Ro.includes(s.toLowerCase())?(i=6,ce?(e.consume(m),x):r.interrupt?n(m):T(m)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(m):a?L(m):E(m))}return m===45||se(m)?(e.consume(m),s+=String.fromCharCode(m),A):t(m)}function x(m){return m===62?(e.consume(m),r.interrupt?n:T):t(m)}function L(m){return O(m)?(e.consume(m),L):U(m)}function E(m){return m===47?(e.consume(m),U):m===58||m===95||he(m)?(e.consume(m),z):O(m)?(e.consume(m),E):U(m)}function z(m){return m===45||m===46||m===58||m===95||se(m)?(e.consume(m),z):F(m)}function F(m){return m===61?(e.consume(m),y):O(m)?(e.consume(m),F):E(m)}function y(m){return m===null||m===60||m===61||m===62||m===96?t(m):m===34||m===39?(e.consume(m),u=m,M):O(m)?(e.consume(m),y):$(m)}function M(m){return m===u?(e.consume(m),u=null,B):m===null||R(m)?t(m):(e.consume(m),M)}function $(m){return m===null||m===34||m===39||m===47||m===60||m===61||m===62||m===96||te(m)?F(m):(e.consume(m),$)}function B(m){return m===47||m===62||O(m)?E(m):t(m)}function U(m){return m===62?(e.consume(m),D):t(m)}function D(m){return m===null||R(m)?T(m):O(m)?(e.consume(m),D):t(m)}function T(m){return m===45&&i===2?(e.consume(m),j):m===60&&i===1?(e.consume(m),Q):m===62&&i===4?(e.consume(m),ue):m===63&&i===3?(e.consume(m),d):m===93&&i===5?(e.consume(m),ge):R(m)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(No,ye,q)(m)):m===null||R(m)?(e.exit("htmlFlowData"),q(m)):(e.consume(m),T)}function q(m){return e.check(Po,_,ye)(m)}function _(m){return e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),I}function I(m){return m===null||R(m)?q(m):(e.enter("htmlFlowData"),T(m))}function j(m){return m===45?(e.consume(m),d):T(m)}function Q(m){return m===47?(e.consume(m),s="",le):T(m)}function le(m){if(m===62){const ce=s.toLowerCase();return rr.includes(ce)?(e.consume(m),ue):T(m)}return he(m)&&s.length<8?(e.consume(m),s+=String.fromCharCode(m),le):T(m)}function ge(m){return m===93?(e.consume(m),d):T(m)}function d(m){return m===62?(e.consume(m),ue):m===45&&i===2?(e.consume(m),d):T(m)}function ue(m){return m===null||R(m)?(e.exit("htmlFlowData"),ye(m)):(e.consume(m),ue)}function ye(m){return e.exit("htmlFlow"),n(m)}}function Oo(e,n,t){const r=this;return i;function i(s){return R(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a):t(s)}function a(s){return r.parser.lazy[r.now().line]?t(s):n(s)}}function Fo(e,n,t){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Ln,n,t)}}const Bo={name:"htmlText",tokenize:Uo};function Uo(e,n,t){const r=this;let i,a,s;return o;function o(d){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(d),u}function u(d){return d===33?(e.consume(d),l):d===47?(e.consume(d),F):d===63?(e.consume(d),E):he(d)?(e.consume(d),$):t(d)}function l(d){return d===45?(e.consume(d),c):d===91?(e.consume(d),a=0,w):he(d)?(e.consume(d),L):t(d)}function c(d){return d===45?(e.consume(d),f):t(d)}function p(d){return d===null?t(d):d===45?(e.consume(d),h):R(d)?(s=p,Q(d)):(e.consume(d),p)}function h(d){return d===45?(e.consume(d),f):p(d)}function f(d){return d===62?j(d):d===45?h(d):p(d)}function w(d){const ue="CDATA[";return d===ue.charCodeAt(a++)?(e.consume(d),a===ue.length?b:w):t(d)}function b(d){return d===null?t(d):d===93?(e.consume(d),A):R(d)?(s=b,Q(d)):(e.consume(d),b)}function A(d){return d===93?(e.consume(d),x):b(d)}function x(d){return d===62?j(d):d===93?(e.consume(d),x):b(d)}function L(d){return d===null||d===62?j(d):R(d)?(s=L,Q(d)):(e.consume(d),L)}function E(d){return d===null?t(d):d===63?(e.consume(d),z):R(d)?(s=E,Q(d)):(e.consume(d),E)}function z(d){return d===62?j(d):E(d)}function F(d){return he(d)?(e.consume(d),y):t(d)}function y(d){return d===45||se(d)?(e.consume(d),y):M(d)}function M(d){return R(d)?(s=M,Q(d)):O(d)?(e.consume(d),M):j(d)}function $(d){return d===45||se(d)?(e.consume(d),$):d===47||d===62||te(d)?B(d):t(d)}function B(d){return d===47?(e.consume(d),j):d===58||d===95||he(d)?(e.consume(d),U):R(d)?(s=B,Q(d)):O(d)?(e.consume(d),B):j(d)}function U(d){return d===45||d===46||d===58||d===95||se(d)?(e.consume(d),U):D(d)}function D(d){return d===61?(e.consume(d),T):R(d)?(s=D,Q(d)):O(d)?(e.consume(d),D):B(d)}function T(d){return d===null||d===60||d===61||d===62||d===96?t(d):d===34||d===39?(e.consume(d),i=d,q):R(d)?(s=T,Q(d)):O(d)?(e.consume(d),T):(e.consume(d),_)}function q(d){return d===i?(e.consume(d),i=void 0,I):d===null?t(d):R(d)?(s=q,Q(d)):(e.consume(d),q)}function _(d){return d===null||d===34||d===39||d===60||d===61||d===96?t(d):d===47||d===62||te(d)?B(d):(e.consume(d),_)}function I(d){return d===47||d===62||te(d)?B(d):t(d)}function j(d){return d===62?(e.consume(d),e.exit("htmlTextData"),e.exit("htmlText"),n):t(d)}function Q(d){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),le}function le(d){return O(d)?W(e,ge,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):ge(d)}function ge(d){return e.enter("htmlTextData"),s(d)}}const Et={name:"labelEnd",resolveAll:$o,resolveTo:qo,tokenize:Xo},jo={tokenize:Wo},Ho={tokenize:Go},Vo={tokenize:Yo};function $o(e){let n=-1;const t=[];for(;++n<e.length;){const r=e[n][1];if(t.push(e[n]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",n+=i}}return e.length!==t.length&&me(e,0,e.length,t),e}function qo(e,n){let t=e.length,r=0,i,a,s,o;for(;t--;)if(i=e[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=t);const u={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},l={type:"label",start:{...e[a][1].start},end:{...e[s][1].end}},c={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[s-2][1].start}};return o=[["enter",u,n],["enter",l,n]],o=oe(o,e.slice(a+1,a+r+3)),o=oe(o,[["enter",c,n]]),o=oe(o,It(n.parser.constructs.insideSpan.null,e.slice(a+r+4,s-3),n)),o=oe(o,[["exit",c,n],e[s-2],e[s-1],["exit",l,n]]),o=oe(o,e.slice(s+1)),o=oe(o,[["exit",u,n]]),me(e,a,e.length,o),e}function Xo(e,n,t){const r=this;let i=r.events.length,a,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return o;function o(h){return a?a._inactive?p(h):(s=r.parser.defined.includes(Fe(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),u):t(h)}function u(h){return h===40?e.attempt(jo,c,s?c:p)(h):h===91?e.attempt(Ho,c,s?l:p)(h):s?c(h):p(h)}function l(h){return e.attempt(Vo,c,p)(h)}function c(h){return n(h)}function p(h){return a._balanced=!0,t(h)}}function Wo(e,n,t){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),i}function i(p){return te(p)?Ke(e,a)(p):a(p)}function a(p){return p===41?c(p):yi(e,s,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function s(p){return te(p)?Ke(e,u)(p):c(p)}function o(p){return t(p)}function u(p){return p===34||p===39||p===40?ki(e,l,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):c(p)}function l(p){return te(p)?Ke(e,c)(p):c(p)}function c(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),n):t(p)}}function Go(e,n,t){const r=this;return i;function i(o){return xi.call(r,e,a,s,"reference","referenceMarker","referenceString")(o)}function a(o){return r.parser.defined.includes(Fe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?n(o):t(o)}function s(o){return t(o)}}function Yo(e,n,t){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),n):t(a)}}const Qo={name:"labelStartImage",resolveAll:Et.resolveAll,tokenize:Jo};function Jo(e,n,t){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),a}function a(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),s):t(o)}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):n(o)}}const Ko={name:"labelStartLink",resolveAll:Et.resolveAll,tokenize:Zo};function Zo(e,n,t){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(s):n(s)}}const Wn={name:"lineEnding",tokenize:el};function el(e,n){return t;function t(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),W(e,n,"linePrefix")}}const wn={name:"thematicBreak",tokenize:nl};function nl(e,n,t){let r=0,i;return a;function a(l){return e.enter("thematicBreak"),s(l)}function s(l){return i=l,o(l)}function o(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||R(l))?(e.exit("thematicBreak"),n(l)):t(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),O(l)?W(e,o,"whitespace")(l):o(l))}}const ne={continuation:{tokenize:al},exit:ol,name:"list",tokenize:il},tl={partial:!0,tokenize:ll},rl={partial:!0,tokenize:sl};function il(e,n,t){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return o;function o(f){const w=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:pt(f)){if(r.containerState.type||(r.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(wn,t,l)(f):l(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(f)}return t(f)}function u(f){return pt(f)&&++s<10?(e.consume(f),u):(!r.interrupt||s<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),l(f)):t(f)}function l(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Ln,r.interrupt?t:c,e.attempt(tl,h,p))}function c(f){return r.containerState.initialBlankLine=!0,a++,h(f)}function p(f){return O(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),h):t(f)}function h(f){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,n(f)}}function al(e,n,t){const r=this;return r.containerState._closeFlow=void 0,e.check(Ln,i,a);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,W(e,n,"listItemIndent",r.containerState.size+1)(o)}function a(o){return r.containerState.furtherBlankLines||!O(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(rl,n,s)(o))}function s(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,W(e,e.attempt(ne,n,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function sl(e,n,t){const r=this;return W(e,i,"listItemIndent",r.containerState.size+1);function i(a){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?n(a):t(a)}}function ol(e){e.exit(this.containerState.type)}function ll(e,n,t){const r=this;return W(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const s=r.events[r.events.length-1];return!O(a)&&s&&s[1].type==="listItemPrefixWhitespace"?n(a):t(a)}}const ir={name:"setextUnderline",resolveTo:ul,tokenize:cl};function ul(e,n){let t=e.length,r,i,a;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){r=t;break}e[t][1].type==="paragraph"&&(i=t)}else e[t][1].type==="content"&&e.splice(t,1),!a&&e[t][1].type==="definition"&&(a=t);const s={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",s,n]),e.splice(a+1,0,["exit",e[r][1],n]),e[r][1].end={...e[a][1].end}):e[r][1]=s,e.push(["exit",s,n]),e}function cl(e,n,t){const r=this;let i;return a;function a(l){let c=r.events.length,p;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){p=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),i=l,s(l)):t(l)}function s(l){return e.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===i?(e.consume(l),o):(e.exit("setextHeadingLineSequence"),O(l)?W(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||R(l)?(e.exit("setextHeadingLine"),n(l)):t(l)}}const pl={tokenize:fl};function fl(e){const n=this,t=e.attempt(Ln,r,e.attempt(this.parser.constructs.flowInitial,i,W(e,e.attempt(this.parser.constructs.flow,i,e.attempt(yo,i)),"linePrefix")));return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),n.currentConstruct=void 0,t}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n.currentConstruct=void 0,t}}const hl={resolveAll:bi()},dl=wi("string"),ml=wi("text");function wi(e){return{resolveAll:bi(e==="text"?gl:void 0),tokenize:n};function n(t){const r=this,i=this.parser.constructs[e],a=t.attempt(i,s,o);return s;function s(c){return l(c)?a(c):o(c)}function o(c){if(c===null){t.consume(c);return}return t.enter("data"),t.consume(c),u}function u(c){return l(c)?(t.exit("data"),a(c)):(t.consume(c),u)}function l(c){if(c===null)return!0;const p=i[c];let h=-1;if(p)for(;++h<p.length;){const f=p[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function bi(e){return n;function n(t,r){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(t,r):t}}function gl(e,n){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){const r=e[t-1][1],i=n.sliceStream(r);let a=i.length,s=-1,o=0,u;for(;a--;){const l=i[a];if(typeof l=="string"){for(s=l.length;l.charCodeAt(s-1)===32;)o++,s--;if(s)break;s=-1}else if(l===-2)u=!0,o++;else if(l!==-1){a++;break}}if(n._contentTypeTextTrailing&&t===e.length&&(o=0),o){const l={type:t===e.length||u||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:r.start._bufferIndex+s,_index:r.start._index+a,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...l.start},r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(t,0,["enter",l,n],["exit",l,n]),t+=2)}t++}return e}const yl={42:ne,43:ne,45:ne,48:ne,49:ne,50:ne,51:ne,52:ne,53:ne,54:ne,55:ne,56:ne,57:ne,62:hi},xl={91:Co},kl={[-2]:Xn,[-1]:Xn,32:Xn},wl={35:Do,42:wn,45:[ir,wn],60:vo,61:ir,95:wn,96:tr,126:tr},bl={38:mi,92:di},Cl={[-5]:Wn,[-4]:Wn,[-3]:Wn,33:Qo,38:mi,42:ft,60:[Js,Bo],91:Ko,92:[Ao,di],93:Et,95:ft,96:co},Sl={null:[ft,hl]},Il={null:[42,95]},El={null:[]},Al=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Il,contentInitial:xl,disable:El,document:yl,flow:wl,flowInitial:kl,insideSpan:Sl,string:bl,text:Cl},Symbol.toStringTag,{value:"Module"}));function Tl(e,n,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},a=[];let s=[],o=[];const u={attempt:M(F),check:M(y),consume:L,enter:E,exit:z,interrupt:M(y,{interrupt:!0})},l={code:null,containerState:{},defineSkip:b,events:[],now:w,parser:e,previous:null,sliceSerialize:h,sliceStream:f,write:p};let c=n.tokenize.call(l,u);return n.resolveAll&&a.push(n),l;function p(D){return s=oe(s,D),A(),s[s.length-1]!==null?[]:($(n,0),l.events=It(a,l.events,l),l.events)}function h(D,T){return _l(f(D),T)}function f(D){return Dl(s,D)}function w(){const{_bufferIndex:D,_index:T,line:q,column:_,offset:I}=r;return{_bufferIndex:D,_index:T,line:q,column:_,offset:I}}function b(D){i[D.line]=D.column,U()}function A(){let D;for(;r._index<s.length;){const T=s[r._index];if(typeof T=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<T.length;)x(T.charCodeAt(r._bufferIndex));else x(T)}}function x(D){c=c(D)}function L(D){R(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,U()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=D}function E(D,T){const q=T||{};return q.type=D,q.start=w(),l.events.push(["enter",q,l]),o.push(q),q}function z(D){const T=o.pop();return T.end=w(),l.events.push(["exit",T,l]),T}function F(D,T){$(D,T.from)}function y(D,T){T.restore()}function M(D,T){return q;function q(_,I,j){let Q,le,ge,d;return Array.isArray(_)?ye(_):"tokenize"in _?ye([_]):ue(_);function ue(J){return $e;function $e(be){const Re=be!==null&&J[be],ve=be!==null&&J.null,cn=[...Array.isArray(Re)?Re:Re?[Re]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return ye(cn)(be)}}function ye(J){return Q=J,le=0,J.length===0?j:m(J[le])}function m(J){return $e;function $e(be){return d=B(),ge=J,J.partial||(l.currentConstruct=J),J.name&&l.parser.constructs.disable.null.includes(J.name)?Ie():J.tokenize.call(T?Object.assign(Object.create(l),T):l,u,ce,Ie)(be)}}function ce(J){return D(ge,d),I}function Ie(J){return d.restore(),++le<Q.length?m(Q[le]):j}}}function $(D,T){D.resolveAll&&!a.includes(D)&&a.push(D),D.resolve&&me(l.events,T,l.events.length-T,D.resolve(l.events.slice(T),l)),D.resolveTo&&(l.events=D.resolveTo(l.events,l))}function B(){const D=w(),T=l.previous,q=l.currentConstruct,_=l.events.length,I=Array.from(o);return{from:_,restore:j};function j(){r=D,l.previous=T,l.currentConstruct=q,l.events.length=_,o=I,U()}}function U(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Dl(e,n){const t=n.start._index,r=n.start._bufferIndex,i=n.end._index,a=n.end._bufferIndex;let s;if(t===i)s=[e[t].slice(r,a)];else{if(s=e.slice(t,i),r>-1){const o=s[0];typeof o=="string"?s[0]=o.slice(r):s.shift()}a>0&&s.push(e[i].slice(0,a))}return s}function _l(e,n){let t=-1;const r=[];let i;for(;++t<e.length;){const a=e[t];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=n?" ":"	";break}case-1:{if(!n&&i)continue;s=" ";break}default:s=String.fromCharCode(a)}i=a===-2,r.push(s)}return r.join("")}function Ll(e){const r={constructs:Ms([Al,...(e||{}).extensions||[]]),content:i($s),defined:[],document:i(Xs),flow:i(pl),lazy:{},string:i(dl),text:i(ml)};return r;function i(a){return s;function s(o){return Tl(r,a,o)}}}function Rl(e){for(;!gi(e););return e}const ar=/[\0\t\n\r]/g;function vl(){let e=1,n="",t=!0,r;return i;function i(a,s,o){const u=[];let l,c,p,h,f;for(a=n+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),p=0,n="",t&&(a.charCodeAt(0)===65279&&p++,t=void 0);p<a.length;){if(ar.lastIndex=p,l=ar.exec(a),h=l&&l.index!==void 0?l.index:a.length,f=a.charCodeAt(h),!l){n=a.slice(p);break}if(f===10&&p===h&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),p<h&&(u.push(a.slice(p,h)),e+=h-p),f){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}p=h+1}return o&&(r&&u.push(-5),n&&u.push(n),u.push(null)),u}}const Nl=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Pl(e){return e.replace(Nl,zl)}function zl(e,n,t){if(n)return n;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return fi(t.slice(a?2:1),a?16:10)}return St(t)||e}const Ci={}.hasOwnProperty;function Ml(e,n,t){return typeof n!="string"&&(t=n,n=void 0),Ol(t)(Rl(Ll(t).document().write(vl()(e,n,!0))))}function Ol(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Pt),autolinkProtocol:B,autolinkEmail:B,atxHeading:a(Rt),blockQuote:a(ve),characterEscape:B,characterReference:B,codeFenced:a(cn),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(cn,s),codeText:a($i,s),codeTextData:B,data:B,codeFlowValue:B,definition:a(qi),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(Xi),hardBreakEscape:a(vt),hardBreakTrailing:a(vt),htmlFlow:a(Nt,s),htmlFlowData:B,htmlText:a(Nt,s),htmlTextData:B,image:a(Wi),label:s,link:a(Pt),listItem:a(Gi),listItemValue:h,listOrdered:a(zt,p),listUnordered:a(zt),paragraph:a(Yi),reference:m,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(Rt),strong:a(Qi),thematicBreak:a(Ki)},exit:{atxHeading:u(),atxHeadingSequence:F,autolink:u(),autolinkEmail:Re,autolinkProtocol:be,blockQuote:u(),characterEscapeValue:U,characterReferenceMarkerHexadecimal:Ie,characterReferenceMarkerNumeric:Ie,characterReferenceValue:J,characterReference:$e,codeFenced:u(A),codeFencedFence:b,codeFencedFenceInfo:f,codeFencedFenceMeta:w,codeFlowValue:U,codeIndented:u(x),codeText:u(I),codeTextData:U,data:U,definition:u(),definitionDestinationString:z,definitionLabelString:L,definitionTitleString:E,emphasis:u(),hardBreakEscape:u(T),hardBreakTrailing:u(T),htmlFlow:u(q),htmlFlowData:U,htmlText:u(_),htmlTextData:U,image:u(Q),label:ge,labelText:le,lineEnding:D,link:u(j),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ce,resourceDestinationString:d,resourceTitleString:ue,resource:ye,setextHeading:u($),setextHeadingLineSequence:M,setextHeadingText:y,strong:u(),thematicBreak:u()}};Si(n,(e||{}).mdastExtensions||[]);const t={};return r;function r(g){let C={type:"root",children:[]};const v={stack:[C],tokenStack:[],config:n,enter:o,exit:l,buffer:s,resume:c,data:t},P=[];let H=-1;for(;++H<g.length;)if(g[H][1].type==="listOrdered"||g[H][1].type==="listUnordered")if(g[H][0]==="enter")P.push(H);else{const pe=P.pop();H=i(g,pe,H)}for(H=-1;++H<g.length;){const pe=n[g[H][0]];Ci.call(pe,g[H][1].type)&&pe[g[H][1].type].call(Object.assign({sliceSerialize:g[H][2].sliceSerialize},v),g[H][1])}if(v.tokenStack.length>0){const pe=v.tokenStack[v.tokenStack.length-1];(pe[1]||sr).call(v,void 0,pe[0])}for(C.position={start:Ce(g.length>0?g[0][1].start:{line:1,column:1,offset:0}),end:Ce(g.length>0?g[g.length-2][1].end:{line:1,column:1,offset:0})},H=-1;++H<n.transforms.length;)C=n.transforms[H](C)||C;return C}function i(g,C,v){let P=C-1,H=-1,pe=!1,Ee,xe,qe,Xe;for(;++P<=v;){const ie=g[P];switch(ie[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ie[0]==="enter"?H++:H--,Xe=void 0;break}case"lineEndingBlank":{ie[0]==="enter"&&(Ee&&!Xe&&!H&&!qe&&(qe=P),Xe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xe=void 0}if(!H&&ie[0]==="enter"&&ie[1].type==="listItemPrefix"||H===-1&&ie[0]==="exit"&&(ie[1].type==="listUnordered"||ie[1].type==="listOrdered")){if(Ee){let Ne=P;for(xe=void 0;Ne--;){const ke=g[Ne];if(ke[1].type==="lineEnding"||ke[1].type==="lineEndingBlank"){if(ke[0]==="exit")continue;xe&&(g[xe][1].type="lineEndingBlank",pe=!0),ke[1].type="lineEnding",xe=Ne}else if(!(ke[1].type==="linePrefix"||ke[1].type==="blockQuotePrefix"||ke[1].type==="blockQuotePrefixWhitespace"||ke[1].type==="blockQuoteMarker"||ke[1].type==="listItemIndent"))break}qe&&(!xe||qe<xe)&&(Ee._spread=!0),Ee.end=Object.assign({},xe?g[xe][1].start:ie[1].end),g.splice(xe||P,0,["exit",Ee,ie[2]]),P++,v++}if(ie[1].type==="listItemPrefix"){const Ne={type:"listItem",_spread:!1,start:Object.assign({},ie[1].start),end:void 0};Ee=Ne,g.splice(P,0,["enter",Ne,ie[2]]),P++,v++,qe=void 0,Xe=!0}}}return g[C][1]._spread=pe,v}function a(g,C){return v;function v(P){o.call(this,g(P),P),C&&C.call(this,P)}}function s(){this.stack.push({type:"fragment",children:[]})}function o(g,C,v){this.stack[this.stack.length-1].children.push(g),this.stack.push(g),this.tokenStack.push([C,v||void 0]),g.position={start:Ce(C.start),end:void 0}}function u(g){return C;function C(v){g&&g.call(this,v),l.call(this,v)}}function l(g,C){const v=this.stack.pop(),P=this.tokenStack.pop();if(P)P[0].type!==g.type&&(C?C.call(this,g,P[0]):(P[1]||sr).call(this,g,P[0]));else throw new Error("Cannot close `"+g.type+"` ("+Je({start:g.start,end:g.end})+"): it’s not open");v.position.end=Ce(g.end)}function c(){return Ps(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function h(g){if(this.data.expectingFirstListItemValue){const C=this.stack[this.stack.length-2];C.start=Number.parseInt(this.sliceSerialize(g),10),this.data.expectingFirstListItemValue=void 0}}function f(){const g=this.resume(),C=this.stack[this.stack.length-1];C.lang=g}function w(){const g=this.resume(),C=this.stack[this.stack.length-1];C.meta=g}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function A(){const g=this.resume(),C=this.stack[this.stack.length-1];C.value=g.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const g=this.resume(),C=this.stack[this.stack.length-1];C.value=g.replace(/(\r?\n|\r)$/g,"")}function L(g){const C=this.resume(),v=this.stack[this.stack.length-1];v.label=C,v.identifier=Fe(this.sliceSerialize(g)).toLowerCase()}function E(){const g=this.resume(),C=this.stack[this.stack.length-1];C.title=g}function z(){const g=this.resume(),C=this.stack[this.stack.length-1];C.url=g}function F(g){const C=this.stack[this.stack.length-1];if(!C.depth){const v=this.sliceSerialize(g).length;C.depth=v}}function y(){this.data.setextHeadingSlurpLineEnding=!0}function M(g){const C=this.stack[this.stack.length-1];C.depth=this.sliceSerialize(g).codePointAt(0)===61?1:2}function $(){this.data.setextHeadingSlurpLineEnding=void 0}function B(g){const v=this.stack[this.stack.length-1].children;let P=v[v.length-1];(!P||P.type!=="text")&&(P=Ji(),P.position={start:Ce(g.start),end:void 0},v.push(P)),this.stack.push(P)}function U(g){const C=this.stack.pop();C.value+=this.sliceSerialize(g),C.position.end=Ce(g.end)}function D(g){const C=this.stack[this.stack.length-1];if(this.data.atHardBreak){const v=C.children[C.children.length-1];v.position.end=Ce(g.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(C.type)&&(B.call(this,g),U.call(this,g))}function T(){this.data.atHardBreak=!0}function q(){const g=this.resume(),C=this.stack[this.stack.length-1];C.value=g}function _(){const g=this.resume(),C=this.stack[this.stack.length-1];C.value=g}function I(){const g=this.resume(),C=this.stack[this.stack.length-1];C.value=g}function j(){const g=this.stack[this.stack.length-1];if(this.data.inReference){const C=this.data.referenceType||"shortcut";g.type+="Reference",g.referenceType=C,delete g.url,delete g.title}else delete g.identifier,delete g.label;this.data.referenceType=void 0}function Q(){const g=this.stack[this.stack.length-1];if(this.data.inReference){const C=this.data.referenceType||"shortcut";g.type+="Reference",g.referenceType=C,delete g.url,delete g.title}else delete g.identifier,delete g.label;this.data.referenceType=void 0}function le(g){const C=this.sliceSerialize(g),v=this.stack[this.stack.length-2];v.label=Pl(C),v.identifier=Fe(C).toLowerCase()}function ge(){const g=this.stack[this.stack.length-1],C=this.resume(),v=this.stack[this.stack.length-1];if(this.data.inReference=!0,v.type==="link"){const P=g.children;v.children=P}else v.alt=C}function d(){const g=this.resume(),C=this.stack[this.stack.length-1];C.url=g}function ue(){const g=this.resume(),C=this.stack[this.stack.length-1];C.title=g}function ye(){this.data.inReference=void 0}function m(){this.data.referenceType="collapsed"}function ce(g){const C=this.resume(),v=this.stack[this.stack.length-1];v.label=C,v.identifier=Fe(this.sliceSerialize(g)).toLowerCase(),this.data.referenceType="full"}function Ie(g){this.data.characterReferenceType=g.type}function J(g){const C=this.sliceSerialize(g),v=this.data.characterReferenceType;let P;v?(P=fi(C,v==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):P=St(C);const H=this.stack[this.stack.length-1];H.value+=P}function $e(g){const C=this.stack.pop();C.position.end=Ce(g.end)}function be(g){U.call(this,g);const C=this.stack[this.stack.length-1];C.url=this.sliceSerialize(g)}function Re(g){U.call(this,g);const C=this.stack[this.stack.length-1];C.url="mailto:"+this.sliceSerialize(g)}function ve(){return{type:"blockquote",children:[]}}function cn(){return{type:"code",lang:null,meta:null,value:""}}function $i(){return{type:"inlineCode",value:""}}function qi(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Xi(){return{type:"emphasis",children:[]}}function Rt(){return{type:"heading",depth:0,children:[]}}function vt(){return{type:"break"}}function Nt(){return{type:"html",value:""}}function Wi(){return{type:"image",title:null,url:"",alt:null}}function Pt(){return{type:"link",title:null,url:"",children:[]}}function zt(g){return{type:"list",ordered:g.type==="listOrdered",start:null,spread:g._spread,children:[]}}function Gi(g){return{type:"listItem",spread:g._spread,checked:null,children:[]}}function Yi(){return{type:"paragraph",children:[]}}function Qi(){return{type:"strong",children:[]}}function Ji(){return{type:"text",value:""}}function Ki(){return{type:"thematicBreak"}}}function Ce(e){return{line:e.line,column:e.column,offset:e.offset}}function Si(e,n){let t=-1;for(;++t<n.length;){const r=n[t];Array.isArray(r)?Si(e,r):Fl(e,r)}}function Fl(e,n){let t;for(t in n)if(Ci.call(n,t))switch(t){case"canContainEols":{const r=n[t];r&&e[t].push(...r);break}case"transforms":{const r=n[t];r&&e[t].push(...r);break}case"enter":case"exit":{const r=n[t];r&&Object.assign(e[t],r);break}}}function sr(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+Je({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+Je({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+Je({start:n.start,end:n.end})+") is still open")}function Bl(e){const n=this;n.parser=t;function t(r){return Ml(r,{...n.data("settings"),...e,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}function Ul(e,n){const t={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(n),!0)};return e.patch(n,t),e.applyData(n,t)}function jl(e,n){const t={type:"element",tagName:"br",properties:{},children:[]};return e.patch(n,t),[e.applyData(n,t),{type:"text",value:`
`}]}function Hl(e,n){const t=n.value?n.value+`
`:"",r={},i=n.lang?n.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return n.meta&&(a.data={meta:n.meta}),e.patch(n,a),a=e.applyData(n,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(n,a),a}function Vl(e,n){const t={type:"element",tagName:"del",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function $l(e,n){const t={type:"element",tagName:"em",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function ql(e,n){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(n.identifier).toUpperCase(),i=je(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let s,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=a+1,o+=1,e.footnoteCounts.set(r,o);const u={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(n,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(n,l),e.applyData(n,l)}function Xl(e,n){const t={type:"element",tagName:"h"+n.depth,properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function Wl(e,n){if(e.options.allowDangerousHtml){const t={type:"raw",value:n.value};return e.patch(n,t),e.applyData(n,t)}}function Ii(e,n){const t=n.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+r}];const i=e.all(n),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function Gl(e,n){const t=String(n.identifier).toUpperCase(),r=e.definitionById.get(t);if(!r)return Ii(e,n);const i={src:je(r.url||""),alt:n.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(n,a),e.applyData(n,a)}function Yl(e,n){const t={src:je(n.url)};n.alt!==null&&n.alt!==void 0&&(t.alt=n.alt),n.title!==null&&n.title!==void 0&&(t.title=n.title);const r={type:"element",tagName:"img",properties:t,children:[]};return e.patch(n,r),e.applyData(n,r)}function Ql(e,n){const t={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};e.patch(n,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return e.patch(n,r),e.applyData(n,r)}function Jl(e,n){const t=String(n.identifier).toUpperCase(),r=e.definitionById.get(t);if(!r)return Ii(e,n);const i={href:je(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:e.all(n)};return e.patch(n,a),e.applyData(n,a)}function Kl(e,n){const t={href:je(n.url)};n.title!==null&&n.title!==void 0&&(t.title=n.title);const r={type:"element",tagName:"a",properties:t,children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function Zl(e,n,t){const r=e.all(n),i=t?eu(t):Ei(n),a={},s=[];if(typeof n.checked=="boolean"){const c=r[0];let p;c&&c.type==="element"&&c.tagName==="p"?p=c:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const c=r[o];(i||o!==0||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?s.push(...c.children):s.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:a,children:s};return e.patch(n,l),e.applyData(n,l)}function eu(e){let n=!1;if(e.type==="list"){n=e.spread||!1;const t=e.children;let r=-1;for(;!n&&++r<t.length;)n=Ei(t[r])}return n}function Ei(e){const n=e.spread;return n??e.children.length>1}function nu(e,n){const t={},r=e.all(n);let i=-1;for(typeof n.start=="number"&&n.start!==1&&(t.start=n.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:n.ordered?"ol":"ul",properties:t,children:e.wrap(r,!0)};return e.patch(n,a),e.applyData(n,a)}function tu(e,n){const t={type:"element",tagName:"p",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function ru(e,n){const t={type:"root",children:e.wrap(e.all(n))};return e.patch(n,t),e.applyData(n,t)}function iu(e,n){const t={type:"element",tagName:"strong",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function au(e,n){const t=e.all(n),r=t.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(n.children[0],s),i.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(t,!0)},o=kt(n.children[1]),u=ai(n.children[n.children.length-1]);o&&u&&(s.position={start:o,end:u}),i.push(s)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(n,a),e.applyData(n,a)}function su(e,n,t){const r=t?t.children:void 0,a=(r?r.indexOf(n):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,o=s?s.length:n.children.length;let u=-1;const l=[];for(;++u<o;){const p=n.children[u],h={},f=s?s[u]:void 0;f&&(h.align=f);let w={type:"element",tagName:a,properties:h,children:[]};p&&(w.children=e.all(p),e.patch(p,w),w=e.applyData(p,w)),l.push(w)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(n,c),e.applyData(n,c)}function ou(e,n){const t={type:"element",tagName:"td",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}const or=9,lr=32;function lu(e){const n=String(e),t=/\r?\n|\r/g;let r=t.exec(n),i=0;const a=[];for(;r;)a.push(ur(n.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(n);return a.push(ur(n.slice(i),i>0,!1)),a.join("")}function ur(e,n,t){let r=0,i=e.length;if(n){let a=e.codePointAt(r);for(;a===or||a===lr;)r++,a=e.codePointAt(r)}if(t){let a=e.codePointAt(i-1);for(;a===or||a===lr;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function uu(e,n){const t={type:"text",value:lu(String(n.value))};return e.patch(n,t),e.applyData(n,t)}function cu(e,n){const t={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(n,t),e.applyData(n,t)}const pu={blockquote:Ul,break:jl,code:Hl,delete:Vl,emphasis:$l,footnoteReference:ql,heading:Xl,html:Wl,imageReference:Gl,image:Yl,inlineCode:Ql,linkReference:Jl,link:Kl,listItem:Zl,list:nu,paragraph:tu,root:ru,strong:iu,table:au,tableCell:ou,tableRow:su,text:uu,thematicBreak:cu,toml:pn,yaml:pn,definition:pn,footnoteDefinition:pn};function pn(){}const Ai=-1,Rn=0,Ze=1,En=2,At=3,Tt=4,Dt=5,_t=6,Ti=7,Di=8,cr=typeof self=="object"?self:globalThis,fu=(e,n)=>{const t=(i,a)=>(e.set(a,i),i),r=i=>{if(e.has(i))return e.get(i);const[a,s]=n[i];switch(a){case Rn:case Ai:return t(s,i);case Ze:{const o=t([],i);for(const u of s)o.push(r(u));return o}case En:{const o=t({},i);for(const[u,l]of s)o[r(u)]=r(l);return o}case At:return t(new Date(s),i);case Tt:{const{source:o,flags:u}=s;return t(new RegExp(o,u),i)}case Dt:{const o=t(new Map,i);for(const[u,l]of s)o.set(r(u),r(l));return o}case _t:{const o=t(new Set,i);for(const u of s)o.add(r(u));return o}case Ti:{const{name:o,message:u}=s;return t(new cr[o](u),i)}case Di:return t(BigInt(s),i);case"BigInt":return t(Object(BigInt(s)),i);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:o}=new Uint8Array(s);return t(new DataView(o),s)}}return t(new cr[a](s),i)};return r},pr=e=>fu(new Map,e)(0),ze="",{toString:hu}={},{keys:du}=Object,Qe=e=>{const n=typeof e;if(n!=="object"||!e)return[Rn,n];const t=hu.call(e).slice(8,-1);switch(t){case"Array":return[Ze,ze];case"Object":return[En,ze];case"Date":return[At,ze];case"RegExp":return[Tt,ze];case"Map":return[Dt,ze];case"Set":return[_t,ze];case"DataView":return[Ze,t]}return t.includes("Array")?[Ze,t]:t.includes("Error")?[Ti,t]:[En,t]},fn=([e,n])=>e===Rn&&(n==="function"||n==="symbol"),mu=(e,n,t,r)=>{const i=(s,o)=>{const u=r.push(s)-1;return t.set(o,u),u},a=s=>{if(t.has(s))return t.get(s);let[o,u]=Qe(s);switch(o){case Rn:{let c=s;switch(u){case"bigint":o=Di,c=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([Ai],s)}return i([o,c],s)}case Ze:{if(u){let h=s;return u==="DataView"?h=new Uint8Array(s.buffer):u==="ArrayBuffer"&&(h=new Uint8Array(s)),i([u,[...h]],s)}const c=[],p=i([o,c],s);for(const h of s)c.push(a(h));return p}case En:{if(u)switch(u){case"BigInt":return i([u,s.toString()],s);case"Boolean":case"Number":case"String":return i([u,s.valueOf()],s)}if(n&&"toJSON"in s)return a(s.toJSON());const c=[],p=i([o,c],s);for(const h of du(s))(e||!fn(Qe(s[h])))&&c.push([a(h),a(s[h])]);return p}case At:return i([o,s.toISOString()],s);case Tt:{const{source:c,flags:p}=s;return i([o,{source:c,flags:p}],s)}case Dt:{const c=[],p=i([o,c],s);for(const[h,f]of s)(e||!(fn(Qe(h))||fn(Qe(f))))&&c.push([a(h),a(f)]);return p}case _t:{const c=[],p=i([o,c],s);for(const h of s)(e||!fn(Qe(h)))&&c.push(a(h));return p}}const{message:l}=s;return i([o,{name:u,message:l}],s)};return a},fr=(e,{json:n,lossy:t}={})=>{const r=[];return mu(!(n||t),!!n,new Map,r)(e),r},An=typeof structuredClone=="function"?(e,n)=>n&&("json"in n||"lossy"in n)?pr(fr(e,n)):structuredClone(e):(e,n)=>pr(fr(e,n));function gu(e,n){const t=[{type:"text",value:"↩"}];return n>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),t}function yu(e,n){return"Back to reference "+(e+1)+(n>1?"-"+n:"")}function xu(e){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",t=e.options.footnoteBackContent||gu,r=e.options.footnoteBackLabel||yu,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),p=String(l.identifier).toUpperCase(),h=je(p.toLowerCase());let f=0;const w=[],b=e.footnoteCounts.get(p);for(;b!==void 0&&++f<=b;){w.length>0&&w.push({type:"text",value:" "});let L=typeof t=="string"?t:t(u,f);typeof L=="string"&&(L={type:"text",value:L}),w.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,f),className:["data-footnote-backref"]},children:Array.isArray(L)?L:[L]})}const A=c[c.length-1];if(A&&A.type==="element"&&A.tagName==="p"){const L=A.children[A.children.length-1];L&&L.type==="text"?L.value+=" ":A.children.push({type:"text",value:" "}),A.children.push(...w)}else c.push(...w);const x={type:"element",tagName:"li",properties:{id:n+"fn-"+h},children:e.wrap(c,!0)};e.patch(l,x),o.push(x)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...An(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const _i=(function(e){if(e==null)return Cu;if(typeof e=="function")return vn(e);if(typeof e=="object")return Array.isArray(e)?ku(e):wu(e);if(typeof e=="string")return bu(e);throw new Error("Expected function, string, or object as test")});function ku(e){const n=[];let t=-1;for(;++t<e.length;)n[t]=_i(e[t]);return vn(r);function r(...i){let a=-1;for(;++a<n.length;)if(n[a].apply(this,i))return!0;return!1}}function wu(e){const n=e;return vn(t);function t(r){const i=r;let a;for(a in e)if(i[a]!==n[a])return!1;return!0}}function bu(e){return vn(n);function n(t){return t&&t.type===e}}function vn(e){return n;function n(t,r,i){return!!(Su(t)&&e.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function Cu(){return!0}function Su(e){return e!==null&&typeof e=="object"&&"type"in e}const Li=[],Iu=!0,hr=!1,Eu="skip";function Au(e,n,t,r){let i;typeof n=="function"&&typeof t!="function"?(r=t,t=n):i=n;const a=_i(i),s=r?-1:1;o(e,void 0,[])();function o(u,l,c){const p=u&&typeof u=="object"?u:{};if(typeof p.type=="string"){const f=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(u.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=Li,w,b,A;if((!n||a(u,l,c[c.length-1]||void 0))&&(f=Tu(t(u,c)),f[0]===hr))return f;if("children"in u&&u.children){const x=u;if(x.children&&f[0]!==Eu)for(b=(r?x.children.length:-1)+s,A=c.concat(x);b>-1&&b<x.children.length;){const L=x.children[b];if(w=o(L,b,A)(),w[0]===hr)return w;b=typeof w[1]=="number"?w[1]:b+s}}return f}}}function Tu(e){return Array.isArray(e)?e:typeof e=="number"?[Iu,e]:e==null?Li:[e]}function Ri(e,n,t,r){let i,a,s;typeof n=="function"&&typeof t!="function"?(a=void 0,s=n,i=t):(a=n,s=t,i=r),Au(e,a,o,i);function o(u,l){const c=l[l.length-1],p=c?c.children.indexOf(u):void 0;return s(u,p,c)}}const ht={}.hasOwnProperty,Du={};function _u(e,n){const t=n||Du,r=new Map,i=new Map,a=new Map,s={...pu,...t.handlers},o={all:l,applyData:Ru,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:s,one:u,options:t,patch:Lu,wrap:Nu};return Ri(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const p=c.type==="definition"?r:i,h=String(c.identifier).toUpperCase();p.has(h)||p.set(h,c)}}),o;function u(c,p){const h=c.type,f=o.handlers[h];if(ht.call(o.handlers,h)&&f)return f(o,c,p);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in c){const{children:b,...A}=c,x=An(A);return x.children=o.all(c),x}return An(c)}return(o.options.unknownHandler||vu)(o,c,p)}function l(c){const p=[];if("children"in c){const h=c.children;let f=-1;for(;++f<h.length;){const w=o.one(h[f],c);if(w){if(f&&h[f-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=dr(w.value)),!Array.isArray(w)&&w.type==="element")){const b=w.children[0];b&&b.type==="text"&&(b.value=dr(b.value))}Array.isArray(w)?p.push(...w):p.push(w)}}}return p}}function Lu(e,n){e.position&&(n.position=fs(e))}function Ru(e,n){let t=n;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const s="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:s}}t.type==="element"&&a&&Object.assign(t.properties,An(a)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function vu(e,n){const t=n.data||{},r="value"in n&&!(ht.call(t,"hProperties")||ht.call(t,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function Nu(e,n){const t=[];let r=-1;for(n&&t.push({type:"text",value:`
`});++r<e.length;)r&&t.push({type:"text",value:`
`}),t.push(e[r]);return n&&e.length>0&&t.push({type:"text",value:`
`}),t}function dr(e){let n=0,t=e.charCodeAt(n);for(;t===9||t===32;)n++,t=e.charCodeAt(n);return e.slice(n)}function mr(e,n){const t=_u(e,n),r=t.one(e,void 0),i=xu(t),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function Pu(e,n){return e&&"run"in e?async function(t,r){const i=mr(t,{file:r,...n});await e.run(i,r)}:function(t,r){return mr(t,{file:r,...e||n})}}function gr(e){if(e)throw e}var Gn,yr;function zu(){if(yr)return Gn;yr=1;var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):n.call(l)==="[object Array]"},a=function(l){if(!l||n.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),p=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!p)return!1;var h;for(h in l);return typeof h>"u"||e.call(l,h)},s=function(l,c){t&&c.name==="__proto__"?t(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},o=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return Gn=function u(){var l,c,p,h,f,w,b=arguments[0],A=1,x=arguments.length,L=!1;for(typeof b=="boolean"&&(L=b,b=arguments[1]||{},A=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});A<x;++A)if(l=arguments[A],l!=null)for(c in l)p=o(b,c),h=o(l,c),b!==h&&(L&&h&&(a(h)||(f=i(h)))?(f?(f=!1,w=p&&i(p)?p:[]):w=p&&a(p)?p:{},s(b,{name:c,newValue:u(L,w,h)})):typeof h<"u"&&s(b,{name:c,newValue:h}));return b},Gn}var Mu=zu();const Yn=qr(Mu);function dt(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ou(){const e=[],n={run:t,use:r};return n;function t(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);o(null,...i);function o(u,...l){const c=e[++a];let p=-1;if(u){s(u);return}for(;++p<i.length;)(l[p]===null||l[p]===void 0)&&(l[p]=i[p]);i=l,c?Fu(c,o)(...l):s(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),n}}function Fu(e,n){let t;return r;function r(...s){const o=e.length>s.length;let u;o&&s.push(i);try{u=e.apply(this,s)}catch(l){const c=l;if(o&&t)throw c;return i(c)}o||(u&&u.then&&typeof u.then=="function"?u.then(a,i):u instanceof Error?i(u):a(u))}function i(s,...o){t||(t=!0,n(s,...o))}function a(s){i(null,s)}}const fe={basename:Bu,dirname:Uu,extname:ju,join:Hu,sep:"/"};function Bu(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');ln(e);let t=0,r=-1,i=e.length,a;if(n===void 0||n.length===0||n.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){t=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(t,r)}if(n===e)return"";let s=-1,o=n.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){t=i+1;break}}else s<0&&(a=!0,s=i+1),o>-1&&(e.codePointAt(i)===n.codePointAt(o--)?o<0&&(r=i):(o=-1,r=s));return t===r?r=s:r<0&&(r=e.length),e.slice(t,r)}function Uu(e){if(ln(e),e.length===0)return".";let n=-1,t=e.length,r;for(;--t;)if(e.codePointAt(t)===47){if(r){n=t;break}}else r||(r=!0);return n<0?e.codePointAt(0)===47?"/":".":n===1&&e.codePointAt(0)===47?"//":e.slice(0,n)}function ju(e){ln(e);let n=e.length,t=-1,r=0,i=-1,a=0,s;for(;n--;){const o=e.codePointAt(n);if(o===47){if(s){r=n+1;break}continue}t<0&&(s=!0,t=n+1),o===46?i<0?i=n:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===r+1?"":e.slice(i,t)}function Hu(...e){let n=-1,t;for(;++n<e.length;)ln(e[n]),e[n]&&(t=t===void 0?e[n]:t+"/"+e[n]);return t===void 0?".":Vu(t)}function Vu(e){ln(e);const n=e.codePointAt(0)===47;let t=$u(e,!n);return t.length===0&&!n&&(t="."),t.length>0&&e.codePointAt(e.length-1)===47&&(t+="/"),n?"/"+t:t}function $u(e,n){let t="",r=0,i=-1,a=0,s=-1,o,u;for(;++s<=e.length;){if(s<e.length)o=e.codePointAt(s);else{if(o===47)break;o=47}if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(u=t.lastIndexOf("/"),u!==t.length-1){u<0?(t="",r=0):(t=t.slice(0,u),r=t.length-1-t.lastIndexOf("/")),i=s,a=0;continue}}else if(t.length>0){t="",r=0,i=s,a=0;continue}}n&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+e.slice(i+1,s):t=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===46&&a>-1?a++:a=-1}return t}function ln(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const qu={cwd:Xu};function Xu(){return"/"}function mt(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Wu(e){if(typeof e=="string")e=new URL(e);else if(!mt(e)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(e.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return Gu(e)}function Gu(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const n=e.pathname;let t=-1;for(;++t<n.length;)if(n.codePointAt(t)===37&&n.codePointAt(t+1)===50){const r=n.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(n)}const Qn=["history","path","basename","stem","extname","dirname"];class vi{constructor(n){let t;n?mt(n)?t={path:n}:typeof n=="string"||Yu(n)?t={value:n}:t=n:t={},this.cwd="cwd"in t?"":qu.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Qn.length;){const a=Qn[r];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)Qn.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?fe.basename(this.path):void 0}set basename(n){Kn(n,"basename"),Jn(n,"basename"),this.path=fe.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?fe.dirname(this.path):void 0}set dirname(n){xr(this.basename,"dirname"),this.path=fe.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?fe.extname(this.path):void 0}set extname(n){if(Jn(n,"extname"),xr(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=fe.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){mt(n)&&(n=Wu(n)),Kn(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?fe.basename(this.path,this.extname):void 0}set stem(n){Kn(n,"stem"),Jn(n,"stem"),this.path=fe.join(this.dirname||"",n+(this.extname||""))}fail(n,t,r){const i=this.message(n,t,r);throw i.fatal=!0,i}info(n,t,r){const i=this.message(n,t,r);return i.fatal=void 0,i}message(n,t,r){const i=new ee(n,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function Jn(e,n){if(e&&e.includes(fe.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+fe.sep+"`")}function Kn(e,n){if(!e)throw new Error("`"+n+"` cannot be empty")}function xr(e,n){if(!e)throw new Error("Setting `"+n+"` requires `path` to be set too")}function Yu(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Qu=(function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),Ju={}.hasOwnProperty;class Lt extends Qu{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ou()}copy(){const n=new Lt;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];n.use(...r)}return n.data(Yn(!0,{},this.namespace)),n}data(n,t){return typeof n=="string"?arguments.length===2?(nt("data",this.frozen),this.namespace[n]=t,this):Ju.call(this.namespace,n)&&this.namespace[n]||void 0:n?(nt("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(n,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const t=hn(n),r=this.parser||this.Parser;return Zn("parse",r),r(String(t),t)}process(n,t){const r=this;return this.freeze(),Zn("process",this.parser||this.Parser),et("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(a,s){const o=hn(n),u=r.parse(o);r.run(u,o,function(c,p,h){if(c||!p||!h)return l(c);const f=p,w=r.stringify(f,h);ec(w)?h.value=w:h.result=w,l(c,h)});function l(c,p){c||!p?s(c):a?a(p):t(void 0,p)}}}processSync(n){let t=!1,r;return this.freeze(),Zn("processSync",this.parser||this.Parser),et("processSync",this.compiler||this.Compiler),this.process(n,i),wr("processSync","process",t),r;function i(a,s){t=!0,gr(a),r=s}}run(n,t,r){kr(n),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?a(void 0,r):new Promise(a);function a(s,o){const u=hn(t);i.run(n,u,l);function l(c,p,h){const f=p||n;c?o(c):s?s(f):r(void 0,f,h)}}}runSync(n,t){let r=!1,i;return this.run(n,t,a),wr("runSync","run",r),i;function a(s,o){gr(s),i=o,r=!0}}stringify(n,t){this.freeze();const r=hn(t),i=this.compiler||this.Compiler;return et("stringify",i),kr(n),i(n,r)}use(n,...t){const r=this.attachers,i=this.namespace;if(nt("use",this.frozen),n!=null)if(typeof n=="function")u(n,t);else if(typeof n=="object")Array.isArray(n)?o(n):s(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function a(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...p]=l;u(c,p)}else s(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function s(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(i.settings=Yn(!0,i.settings,l.settings))}function o(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const p=l[c];a(p)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let p=-1,h=-1;for(;++p<r.length;)if(r[p][0]===l){h=p;break}if(h===-1)r.push([l,...c]);else if(c.length>0){let[f,...w]=c;const b=r[h][1];dt(b)&&dt(f)&&(f=Yn(!0,b,f)),r[h]=[l,f,...w]}}}}const Ku=new Lt().freeze();function Zn(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function et(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function nt(e,n){if(n)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function kr(e){if(!dt(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function wr(e,n,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+n+"` instead")}function hn(e){return Zu(e)?e:new vi(e)}function Zu(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function ec(e){return typeof e=="string"||nc(e)}function nc(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const tc="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",br=[],Cr={allowDangerousHtml:!0},rc=/^(https?|ircs?|mailto|xmpp)$/i,ic=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Ni(e){const n=ac(e),t=sc(e);return oc(n.runSync(n.parse(t),t),e)}function ac(e){const n=e.rehypePlugins||br,t=e.remarkPlugins||br,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Cr}:Cr;return Ku().use(Bl).use(t).use(Pu,r).use(n)}function sc(e){const n=e.children||"",t=new vi;return typeof n=="string"&&(t.value=n),t}function oc(e,n){const t=n.allowedElements,r=n.allowElement,i=n.components,a=n.disallowedElements,s=n.skipHtml,o=n.unwrapDisallowed,u=n.urlTransform||lc;for(const c of ic)Object.hasOwn(n,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+tc+c.id,void 0);return Ri(e,l),ys(e,{Fragment:da,components:i,ignoreInvalidStyle:!0,jsx:S,jsxs:S,passKeys:!0,passNode:!0});function l(c,p,h){if(c.type==="raw"&&h&&typeof p=="number")return s?h.children.splice(p,1):h.children[p]={type:"text",value:c.value},p;if(c.type==="element"){let f;for(f in qn)if(Object.hasOwn(qn,f)&&Object.hasOwn(c.properties,f)){const w=c.properties[f],b=qn[f];(b===null||b.includes(c.tagName))&&(c.properties[f]=u(String(w||""),f,c))}}if(c.type==="element"){let f=t?!t.includes(c.tagName):a?a.includes(c.tagName):!1;if(!f&&r&&typeof p=="number"&&(f=!r(c,p,h)),f&&h&&typeof p=="number")return o&&c.children?h.children.splice(p,1,...c.children):h.children.splice(p,1),p}}}function lc(e){const n=e.indexOf(":"),t=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return n===-1||i!==-1&&n>i||t!==-1&&n>t||r!==-1&&n>r||rc.test(e.slice(0,n))?e:""}const uc={uploading:"Загрузка",paused:"Пауза",error:"Ошибка",uploaded:"Готово"},cc={uploading:"text-blue-500",paused:"text-yellow-500",error:"text-red-500",uploaded:"text-green-500"};function Pi({item:e}){const n=e.totalChunks>0?e.totalChunks:"-";return S("div",{className:"flex flex-col gap-2 p-3 rounded-lg bg-muted/50 border",children:[S("div",{className:"flex items-center justify-between gap-2",children:[S("div",{className:"flex-1 min-w-0",children:[S("div",{className:"text-sm font-medium truncate",title:e.name??e.fileId,children:e.name??e.fileId}),S("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[S("span",{className:De(cc[e.status]),children:uc[e.status]}),S("span",{children:[e.progress,"%"]}),S("span",{children:[e.uploadedChunks," / ",n," chunks"]}),e.status==="error"&&typeof e.failedChunk=="number"&&S("span",{className:"text-red-500",children:["Chunk #",e.failedChunk," failed"]})]})]}),S("div",{className:"flex items-center gap-1",children:[e.status==="uploading"&&e.onPause&&S(Me,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:e.onPause,disabled:e.disablePause,children:S(de.Pause,{size:14})}),e.status==="paused"&&e.onResume&&S(Me,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:e.onResume,disabled:e.disableResume,children:S(de.Play,{size:14})}),e.status==="error"&&e.onRetry&&S(Me,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:e.onRetry,disabled:e.disableRetry,children:S(de.RotateCcw,{size:14})}),e.onCancel&&S(Me,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:e.onCancel,disabled:e.disableCancel,children:S(de.X,{size:14})})]})]}),S(aa,{value:e.progress,className:"h-1.5"})]})}Pi.__docgenInfo={description:"",methods:[],displayName:"FileView",props:{item:{required:!0,tsType:{name:"FileListItem"},description:""}}};function zi({items:e,emptyLabel:n}){const t=e.filter(r=>r.status!=="uploaded");return t.length?S("div",{className:"flex flex-col gap-2",children:t.map(r=>S(Pi,{item:r},r.fileId))}):null}zi.__docgenInfo={description:"",methods:[],displayName:"FileList",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"FileListItem"}],raw:"FileListItem[]"},description:""},emptyLabel:{required:!1,tsType:{name:"string"},description:""}}};const pc="_markdown_1mmib_2",fc="_messageRow_1mmib_190",hc="_messageRowUser_1mmib_195",dc="_messageRowAssistant_1mmib_200",mc="_userBubble_1mmib_206",gc="_assistantText_1mmib_219",yc="_messageHeader_1mmib_224",xc="_chatScroll_1mmib_234",kc="_chatMessages_1mmib_241",wc="_chatMessagesIntro_1mmib_246",bc="_loadingDots_1mmib_251",Cc="_loadingDot_1mmib_251",Sc="_streamCursor_1mmib_275",V={markdown:pc,messageRow:fc,messageRowUser:hc,messageRowAssistant:dc,userBubble:mc,assistantText:gc,messageHeader:yc,chatScroll:xc,chatMessages:kc,chatMessagesIntro:wc,loadingDots:bc,loadingDot:Cc,streamCursor:Sc},Mi=({message:e})=>e.type==="user"?S("div",{className:De(V.messageRow,V.messageRowUser),children:S("div",{className:V.userBubble,children:e.content})}):S("div",{className:De(V.messageRow,V.messageRowAssistant),children:S("div",{className:V.assistantText,children:[S("div",{className:V.messageHeader,children:S(de.Bot,{size:14})}),S("div",{className:V.markdown,children:S(Ni,{children:e.content})})]})}),Oi=({content:e})=>S("div",{className:De(V.messageRow,V.messageRowAssistant),children:S("div",{className:V.assistantText,children:[S("div",{className:V.messageHeader,children:S(de.Bot,{size:14})}),S("div",{className:V.markdown,children:[S(Ni,{children:e}),S("span",{className:V.streamCursor})]})]})}),Ic=({fileId:e,fileName:n,fileSize:t})=>{const r=rt(()=>{ta({fileId:e,fileName:n})},[e,n]),i=a=>a?a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:`${(a/(1024*1024)).toFixed(1)} MB`:"";return S("div",{className:De(V.messageRow,V.messageRowUser),children:S("div",{onClick:r,className:"max-w-[75%] rounded-2xl rounded-tr-sm bg-primary/10 border border-primary/20 px-3 py-2 cursor-pointer hover:bg-primary/20 transition-colors",children:S("div",{className:"flex items-center gap-2",children:[S(de.FileDown,{className:"h-4 w-4 text-primary shrink-0"}),S("span",{className:"text-sm font-medium truncate",children:n}),t&&S("span",{className:"text-xs text-muted-foreground shrink-0",children:i(t)})]})})})},Fi=()=>S("div",{className:De(V.messageRow,V.messageRowAssistant),children:S("div",{className:V.assistantText,children:[S("div",{className:V.messageHeader,children:S(de.Bot,{size:14})}),S("div",{className:V.loadingDots,children:[S("div",{className:V.loadingDot}),S("div",{className:V.loadingDot}),S("div",{className:V.loadingDot})]})]})}),Bi=e=>{const n=e.showComposer??!0,t=!!e.intro&&e.messages.length===0&&!e.isLoading&&!e.currentResponse,[r,i]=ma(""),a=Mt(null),s=Mt(null),o=rt(()=>{var h;(h=s.current)==null||h.click()},[]),u=rt(h=>{const f=Array.from(h.currentTarget.files??[]);f.length>0&&e.onFilesSelected&&e.onFilesSelected(f),h.currentTarget.value=""},[e.onFilesSelected]);ga(()=>{if(a.current){const h=a.current.querySelector("[data-radix-scroll-area-viewport]");h&&(h.scrollTop=h.scrollHeight)}},[e.messages,e.currentResponse]);const l=()=>{!r.trim()||e.isLoading||(e.send(r.trim()),i(""))},c=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),l())},p=De(V.chatMessages,t?V.chatMessagesIntro:void 0);return S("div",{className:"flex h-full w-full max-w-2xl mx-auto flex-col",children:S(sa,{className:"flex flex-col h-full rounded-none border-none shadow-none",children:[S(oa,{className:"flex-1 p-0 overflow-hidden",children:S(la,{ref:a,className:"h-full w-full",children:S("div",{className:V.chatScroll,children:S("div",{className:p,children:[t?e.intro:null,e.messages.map(h=>h.fileData?S(Ic,{fileId:h.fileData.fileId,fileName:h.fileData.fileName,fileSize:h.fileData.fileSize,fileType:h.fileData.fileType},h.id):S(Mi,{message:h},h.id)),e.isLoading&&e.currentResponse&&S(Oi,{content:e.currentResponse}),e.isLoading&&!e.currentResponse&&S(Fi,{})]})})})}),n&&S(ua,{className:"p-4 shrink-0 flex-col gap-3",children:[S("input",{ref:s,type:"file",multiple:!0,className:"hidden",onChange:u}),e.files&&e.files.length>0&&S("div",{className:"w-full",children:S(zi,{items:e.files})}),S("div",{className:"flex w-full items-center gap-2",children:[S(Me,{onClick:o,disabled:e.isLoading,size:"icon",variant:"ghost","aria-label":"Прикрепить файл",children:S(de.Paperclip,{size:16})}),S("textarea",{value:r,onChange:h=>i(h.target.value),onKeyDown:c,placeholder:"Напишите сообщение...",style:{background:"transparent",border:"none",outline:"none",boxShadow:"none"},className:"flex-1 resize-none p-0 m-0 text-sm",rows:1,disabled:e.isLoading,"aria-label":"Сообщение"}),S(Me,{onClick:l,disabled:!r.trim()||e.isLoading,size:"icon",variant:"ghost","aria-label":"Отправить",children:S(de.Send,{size:16})})]})]})]})})};Bi.__docgenInfo={description:"",methods:[],displayName:"ChatDetail",props:{messages:{required:!0,tsType:{name:"Array",elements:[{name:"ChatMessage"}],raw:"ChatMessage[]"},description:""},isLoading:{required:!0,tsType:{name:"boolean"},description:""},currentResponse:{required:!0,tsType:{name:"string"},description:""},send:{required:!0,tsType:{name:"signature",type:"function",raw:"(content: string) => void",signature:{arguments:[{type:{name:"string"},name:"content"}],return:{name:"void"}}},description:""},onFilesSelected:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: File[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"File"}],raw:"File[]"},name:"files"}],return:{name:"void"}}},description:""},files:{required:!1,tsType:{name:"Array",elements:[{name:"FileListItem"}],raw:"FileListItem[]"},description:""},showComposer:{required:!1,tsType:{name:"boolean"},description:""},intro:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};Mi.__docgenInfo={description:"",methods:[],displayName:"MessageBubble",props:{message:{required:!0,tsType:{name:"ChatMessage"},description:""}}};Oi.__docgenInfo={description:"",methods:[],displayName:"StreamingMessage",props:{content:{required:!0,tsType:{name:"string"},description:""}}};Fi.__docgenInfo={description:"",methods:[],displayName:"LoadingIndicator"};const K=[];for(let e=0;e<256;++e)K.push((e+256).toString(16).slice(1));function Ec(e,n=0){return(K[e[n+0]]+K[e[n+1]]+K[e[n+2]]+K[e[n+3]]+"-"+K[e[n+4]]+K[e[n+5]]+"-"+K[e[n+6]]+K[e[n+7]]+"-"+K[e[n+8]]+K[e[n+9]]+"-"+K[e[n+10]]+K[e[n+11]]+K[e[n+12]]+K[e[n+13]]+K[e[n+14]]+K[e[n+15]]).toLowerCase()}let tt;const Ac=new Uint8Array(16);function Tc(){if(!tt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");tt=crypto.getRandomValues.bind(crypto)}return tt(Ac)}const Dc=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Sr={randomUUID:Dc};function _c(e,n,t){var i;if(Sr.randomUUID&&!e)return Sr.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??Tc();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Ec(r)}const bn={"requests.show":"Открыть панель заявок","threads.show":"Открыть диалоги/треды","dashboard.mount":"Открыть дашборд","logs.show":"Показать горячие логи","logs.show.cold":"Показать холодные логи","telemetry.show":"Показать горячую телеметрию","telemetry.show.cold":"Показать холодную телеметрию","dumps.list.show":"Показать список дампов","dumps.storages.show":"Показать статистику хранилищ",show_workflows_list:"Показать список воркфлоу",show_workflows_statistic:"Показать статистику воркфлоу",show_nodes_list:"Показать список нод",show_providers_list:"Показать список провайдеров",show_code_source_list:"Показать список источников кода","chats.show_list":"Показать список чатов","chats.show_contexts_list":"Показать список контекстов","chats.show_commands_list":"Показать список команд"},un=Ha(rn,Xr),Ui=_c();let Ir=!1;const ji=()=>{Ir||(console.log("[Chat] Initializing chat session on first use"),un.init(Ui,Qr.OPENAI,"gpt-4o-mini"),Ir=!0)};ca.watch(()=>{console.log("[Chat] Chat initialization requested via event"),ji()});const Lc={name:"weather",description:"Get the current weather",parameters:{type:"object",properties:{city:{type:"string",description:"The city to get the weather for"}},required:["city"]},execute:async e=>({city:e.city,temperature:29,pressure:1013,windSpeed:5})},Rc={name:"getCommands",description:"Get available UI navigation commands",parameters:{type:"object",properties:{},required:[]},execute:async()=>Object.entries(bn).map(([e,n])=>({id:e,desc:n}))},vc={name:"execCommand",description:"Execute UI navigation command by id",parameters:{type:"object",properties:{id:{type:"string",description:"Command id from getCommands"}},required:["id"]},execute:async e=>{console.log("[execCommand] Raw args:",e,typeof e);let n;if(typeof e=="string")try{n=JSON.parse(e).id}catch{n=e}else n=e==null?void 0:e.id;if(console.log("[execCommand] Parsed commandId:",n),console.log("[execCommand] Registered commands:",Mn.getAllIds()),!n)return Ae({id:`cmd_err_${Date.now()}`,type:"assistant",content:"⚠️ Не указан id команды",timestamp:Date.now()}),{ok:!1,error:"Command id not provided"};if(!bn[n])return Ae({id:`cmd_err_${Date.now()}`,type:"assistant",content:`⚠️ Команда \`${n}\` недоступна`,timestamp:Date.now()}),{ok:!1,error:"Command not allowed"};if(!Mn.get(n))return console.log("[execCommand] Command not found in registry:",n),Ae({id:`cmd_err_${Date.now()}`,type:"assistant",content:`⚠️ Команда \`${n}\` не зарегистрирована`,timestamp:Date.now()}),{ok:!1,error:"Command not registered"};try{return Mn.run(n,{}),Ae({id:`cmd_${Date.now()}`,type:"assistant",content:`✅ ${bn[n]}`,timestamp:Date.now()}),{ok:!0}}catch(r){return Ae({id:`cmd_err_${Date.now()}`,type:"assistant",content:`❌ Ошибка: ${bn[n]}`,timestamp:Date.now()}),{ok:!1,error:r instanceof Error?r.message:"Error"}}}};un.registerFunction("weather",Lc);un.registerFunction("getCommands",Rc);un.registerFunction("execCommand",vc);pa.watch(e=>{ji(),un.send(e)});ra.watch(e=>{const n=ia.getState().get(e);if(!n)return;const t={id:`file_${e}`,type:"user",content:`Файл загружен: ${n.fileName}`,timestamp:Date.now(),fileData:{fileId:e,fileName:n.fileName,fileSize:n.fileSize,fileType:n.fileType}};Ae(t),Xr.saveMessage({threadId:Ui,user:"user",type:an.link,data:JSON.stringify({fileId:e,fileName:n.fileName,fileSize:n.fileSize,fileType:n.fileType})})});const He=tn("aichats-list"),Nc=He.createEvent("CHATS_LIST_VIEW_MOUNTED"),Hi=He.createEvent("REFRESH_CHATS_CLICKED");He.createEvent("ADD_CHAT_CLICKED");const Pc=He.createEvent("OPEN_CHAT_DETAIL"),zc=He.createEffect({name:"LIST_CHATS",handler:async e=>await rn.listOfChats(e)}),Tn=Yr(He,zc);G({clock:Nc,filter:()=>{const e=Tn.$state.getState();return!e.isInitialized&&!e.loading},fn:()=>({}),target:Tn.loadMore});G({clock:Hi,fn:()=>({}),target:Tn.reset});G({clock:Hi,fn:()=>({}),target:Tn.loadMore});const Nn=tn("aichats-contexts"),Mc=Nn.createEvent("CONTEXTS_VIEW_MOUNTED"),Vi=Nn.createEvent("REFRESH_CONTEXTS_CLICKED"),Oc=Nn.createEffect({name:"LIST_CONTEXTS",handler:async e=>await rn.listContexts(e)}),Dn=Yr(Nn,Oc);G({clock:Mc,filter:()=>{const e=Dn.$state.getState();return!e.isInitialized&&!e.loading},fn:()=>({}),target:Dn.loadMore});G({clock:Vi,fn:()=>({}),target:Dn.reset});G({clock:Vi,fn:()=>({}),target:Dn.loadMore});const Ve=tn("commands");Ve.createEvent("COMMANDS_VIEW_MOUNTED");Ve.createEvent("REFRESH_COMMANDS_CLICKED");const Fc=Ve.createEvent("EXECUTE_COMMAND_CLICKED"),Bc=Ve.createStore("",{name:"COMMANDS_FILTER"}),Uc=Ve.createEvent("SET_COMMANDS_FILTER");Bc.on(Uc,(e,n)=>n);fa.map(e=>e);const jc=Ve.createEffect({name:"EXECUTE_COMMAND",handler:({commandId:e,params:n})=>{console.log("[Commands] Executing command:",e,n),ha({actionId:e,params:n||{}})}});G({clock:Fc,target:jc});const Hc=sn.createEffect({name:"DELETE_CHAT",handler:({recordId:e})=>rn.deleteChat(e)}),Vc=sn.createEffect({name:"GET_CHAT",handler:e=>(console.log("GET_CHAT",e),rn.getChat(e))}),$c=sn.createEvent("DELETE_CHAT_EVENT");sn.createEvent("EDIT_CHAT_EVENT");G({clock:Pc,target:Vc});G({clock:$c,target:Hc});const qc="aichats-mf";at.getInstance().setLocales(qc,{en:new URL("data:application/json;base64,ewogICJtZW51IjogewogICAgICJjaGF0cyI6ICJDaGF0cyIsCiAgICAgImF1ZGlvIjogIkF1ZGlvIiwKICAgICAidGV4dCI6ICJUZXh0IiwKICAgICAiY29udGV4dHMiOiAiQ29udGV4dHMiLAogICAgICJjb21tYW5kcyI6ICJDb21tYW5kcyIKICB9Cn0K",import.meta.url).toString(),ru:new URL("data:application/json;base64,ewogICJtZW51IjogewogICAgICJjaGF0cyI6ICLQp9Cw0YLRiyIsCiAgICAgImF1ZGlvIjogItCQ0YPQtNC40L4iLAogICAgICJ0ZXh0IjogItCi0LXQutGB0YLQvtCy0YvQtSIsCiAgICAgImNvbnRleHRzIjogItCa0L7QvdGC0LXQutGB0YLRiyIsCiAgICAgImNvbW1hbmRzIjogItCa0L7QvNCw0L3QtNGLIgogIH0KfQo=",import.meta.url).toString()});const np={title:"Components/ChatDetail",component:Bi,parameters:{layout:"fullscreen"},tags:["autodocs"],decorators:[e=>S("div",{style:{height:"600px",background:"hsl(var(--background))"},children:S(e,{})})]},Pn=[{id:"1",type:"user",content:"hi",timestamp:Date.now()-6e4},{id:"2",type:"assistant",content:"Hello! How can I assist you today?",timestamp:Date.now()-55e3},{id:"3",type:"user",content:"расскажи про крупные звезды",timestamp:Date.now()-3e4},{id:"4",type:"assistant",content:`Крупные звезды - это тип звезд, который отличается от обычных звезд своими гигантскими размерами и массой. Такие звезды обладают большим запасом ядерного топлива и горят ярче и дольше, чем обычные звезды.

Одной из самых известных крупных звезд является Betelgeuse, которая является красным сверхгигантом и входит в состав созвездия Ориона. Ее диаметр составляет около 900 раз больше диаметра Солнца.

Другой знаменитой крупной звездой является Ви-Сентавр, одна из самых крупных известных звезд. Она также классифицируется как красный сверхгигант и находится на расстоянии около 1 390 световых лет от Земли.

Крупные звезды играют важную роль в развитии и эволюции вселенной, поскольку они производят большие количества элементов, необходимых для жизни, и в конечном итоге могут сделаться черными дырами или взорваться в виде сверхновых.`,timestamp:Date.now()-25e3}],dn={args:{messages:Pn,isLoading:!1,currentResponse:"",send:e=>console.log("Send:",e),showComposer:!0}},mn={args:{messages:Pn.slice(0,3),isLoading:!0,currentResponse:"",send:e=>console.log("Send:",e),showComposer:!0}},gn={args:{messages:Pn.slice(0,3),isLoading:!0,currentResponse:"Крупные звезды - это тип звезд, который отличается от обычных звезд своими гигантскими размерами и массой...",send:e=>console.log("Send:",e),showComposer:!0}},yn={args:{messages:[{id:"1",type:"user",content:"покажи пример markdown",timestamp:Date.now()-6e4},{id:"2",type:"assistant",content:`# Заголовок 1

## Заголовок 2

### Заголовок 3

Обычный текст с **жирным** и *курсивом*.

Список:
- Первый пункт
- Второй пункт
- Третий пункт

Нумерованный список:
1. Один
2. Два
3. Три

\`\`\`javascript
const hello = "world";
console.log(hello);
\`\`\`

> Это цитата

Инлайн код: \`npm install\`

| Колонка 1 | Колонка 2 |
|-----------|-----------|
| Ячейка 1  | Ячейка 2  |
| Ячейка 3  | Ячейка 4  |
`,timestamp:Date.now()-55e3}],isLoading:!1,currentResponse:"",send:e=>console.log("Send:",e),showComposer:!0}},xn={args:{messages:[],isLoading:!1,currentResponse:"",send:e=>console.log("Send:",e),showComposer:!0}},kn={args:{messages:Pn,isLoading:!1,currentResponse:"",send:e=>console.log("Send:",e),showComposer:!1}};var Er,Ar,Tr;dn.parameters={...dn.parameters,docs:{...(Er=dn.parameters)==null?void 0:Er.docs,source:{originalSource:`{
  args: {
    messages: sampleMessages,
    isLoading: false,
    currentResponse: "",
    send: (content: string) => console.log("Send:", content),
    showComposer: true
  }
}`,...(Tr=(Ar=dn.parameters)==null?void 0:Ar.docs)==null?void 0:Tr.source}}};var Dr,_r,Lr;mn.parameters={...mn.parameters,docs:{...(Dr=mn.parameters)==null?void 0:Dr.docs,source:{originalSource:`{
  args: {
    messages: sampleMessages.slice(0, 3),
    isLoading: true,
    currentResponse: "",
    send: (content: string) => console.log("Send:", content),
    showComposer: true
  }
}`,...(Lr=(_r=mn.parameters)==null?void 0:_r.docs)==null?void 0:Lr.source}}};var Rr,vr,Nr;gn.parameters={...gn.parameters,docs:{...(Rr=gn.parameters)==null?void 0:Rr.docs,source:{originalSource:`{
  args: {
    messages: sampleMessages.slice(0, 3),
    isLoading: true,
    currentResponse: "Крупные звезды - это тип звезд, который отличается от обычных звезд своими гигантскими размерами и массой...",
    send: (content: string) => console.log("Send:", content),
    showComposer: true
  }
}`,...(Nr=(vr=gn.parameters)==null?void 0:vr.docs)==null?void 0:Nr.source}}};var Pr,zr,Mr;yn.parameters={...yn.parameters,docs:{...(Pr=yn.parameters)==null?void 0:Pr.docs,source:{originalSource:`{
  args: {
    messages: [{
      id: "1",
      type: "user" as const,
      content: "покажи пример markdown",
      timestamp: Date.now() - 60000
    }, {
      id: "2",
      type: "assistant" as const,
      content: \`# Заголовок 1

## Заголовок 2

### Заголовок 3

Обычный текст с **жирным** и *курсивом*.

Список:
- Первый пункт
- Второй пункт
- Третий пункт

Нумерованный список:
1. Один
2. Два
3. Три

\\\`\\\`\\\`javascript
const hello = "world";
console.log(hello);
\\\`\\\`\\\`

> Это цитата

Инлайн код: \\\`npm install\\\`

| Колонка 1 | Колонка 2 |
|-----------|-----------|
| Ячейка 1  | Ячейка 2  |
| Ячейка 3  | Ячейка 4  |
\`,
      timestamp: Date.now() - 55000
    }],
    isLoading: false,
    currentResponse: "",
    send: (content: string) => console.log("Send:", content),
    showComposer: true
  }
}`,...(Mr=(zr=yn.parameters)==null?void 0:zr.docs)==null?void 0:Mr.source}}};var Or,Fr,Br;xn.parameters={...xn.parameters,docs:{...(Or=xn.parameters)==null?void 0:Or.docs,source:{originalSource:`{
  args: {
    messages: [],
    isLoading: false,
    currentResponse: "",
    send: (content: string) => console.log("Send:", content),
    showComposer: true
  }
}`,...(Br=(Fr=xn.parameters)==null?void 0:Fr.docs)==null?void 0:Br.source}}};var Ur,jr,Hr;kn.parameters={...kn.parameters,docs:{...(Ur=kn.parameters)==null?void 0:Ur.docs,source:{originalSource:`{
  args: {
    messages: sampleMessages,
    isLoading: false,
    currentResponse: "",
    send: (content: string) => console.log("Send:", content),
    showComposer: false
  }
}`,...(Hr=(jr=kn.parameters)==null?void 0:jr.docs)==null?void 0:Hr.source}}};const tp=["Default","Loading","Streaming","WithMarkdown","Empty","NoComposer"];export{dn as Default,xn as Empty,mn as Loading,kn as NoComposer,gn as Streaming,yn as WithMarkdown,tp as __namedExportsOrder,np as default};
