
### üß¨ –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∞–≤ –≤ `access-service` (–Ω–∞ LMDB)

#### üìÇ –û–±—â–∏–π –ø–æ–¥—Ö–æ–¥:

* –•—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ LMDB (–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ)
* –í—Å–µ –∑–∞–ø–∏—Å–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã, —á—Ç–µ–Ω–∏–µ ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ–µ
* –í—Å–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Å—Ç—Ä–æ—è—Ç—Å—è –∏–∑ **–ø—Ä–µ—Å–µ—Ç–æ–≤**, **–Ω–∞—Å–ª–µ–¥—É–µ–º—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤**, –∏–ª–∏ **–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π**

---

#### üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (LMDB):

##### 1. `users` ‚Äî –±–∞–∑–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–≤—è–∑–æ–∫

| –ö–ª—é—á (`user_id`) | –ó–Ω–∞—á–µ–Ω–∏–µ                                     |
| ---------------- | -------------------------------------------- |
| `user_abc123`    | `preset:basic_user`                          |
| `user_xyz789`    | `preset:admin + override:{service3:method5}` |

* –ó–Ω–∞—á–µ–Ω–∏–µ ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞/JSON, —É–∫–∞–∑—ã–≤–∞—é—â–∞—è, –∫–∞–∫–æ–π –ø—Ä–µ—Å–µ—Ç –ø—Ä–∏–º–µ–Ω—ë–Ω –∏ –∫–∞–∫–∏–µ –µ—Å—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

##### 2. `presets` ‚Äî –±–∞–∑–∞ —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–∞–≤ (—Ä–æ–ª–∏/–≥—Ä—É–ø–ø—ã)

| –ö–ª—é—á (`preset_name`) | –ó–Ω–∞—á–µ–Ω–∏–µ (JSON-–º–∞—Å—Å–∏–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π)         |
| -------------------- | ----------------------------------------- |
| `basic_user`         | `["service1:method1", "service2:read_*"]` |
| `admin`              | `["*:*"]`                                 |

---


---

#### üß† –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–ª—É—á–µ–Ω–∏—è `perm[]`:

1. –ò–∑–≤–ª–µ–∫–∞–µ–º `user_id`
2. –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–π `preset` –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ override‚Äô—ã –∏–∑ `users`
3. –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–ø–∏—Å–æ–∫ `perm[]` –∏–∑ `presets`
4. –ü—Ä–∏–º–µ–Ω—è–µ–º override-–ø—Ä–∞–≤–∏–ª–∞
5. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∫–µ—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `resolved_permissions`

---

#### üìå –ü—Ä–∏–º–µ—Ä —Ö—Ä–∞–Ω–∏–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (`users/user_abc123`):

```json
{
  "preset": "basic_user",
  "override": ["service3:method5", "-service2:read_config"]
}
```

* `-service2:read_config` ‚Äî –∑–∞–ø—Ä–µ—Ç (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –ø—Ä–µ—Å–µ—Ç–∞)

---

#### üß© –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π –º–æ–¥–µ–ª–∏:

* –ë—ã—Å—Ç—Ä–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (`O(1)` lookup + –ø—Ä–æ—Å—Ç–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è)
* –ù–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —Ä–æ–ª—è–º ‚Äî —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω—ã –∏ —è–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
* –ü—Ä–æ—Å—Ç–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ JWT
* –•–æ—Ä–æ—à–æ –ª–æ–∂–∏—Ç—Å—è –Ω–∞ `lmdb`, —Ç.–∫.:

  * –ù–µ–±–æ–ª—å—à–∏–µ –∑–∞–ø–∏—Å–∏
  * –ú–∞–ª–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  * –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞
  * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `mdb_txn` –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏

---

–•–æ—á–µ—à—å, —è —Å—Ä–∞–∑—É –æ—Ñ–æ—Ä–º–ª—é —ç—Ç–æ –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª (PDF –∏–ª–∏ Markdown) —Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏?
